<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://flakkaqi.github.io</id>
    <title>祁先生的微博客</title>
    <updated>2020-06-23T09:08:01.354Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://flakkaqi.github.io"/>
    <link rel="self" href="https://flakkaqi.github.io/atom.xml"/>
    <subtitle>You dida dida me , I huala hula you</subtitle>
    <logo>https://flakkaqi.github.io/images/avatar.png</logo>
    <icon>https://flakkaqi.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, 祁先生的微博客</rights>
    <entry>
        <title type="html"><![CDATA[Spring boot入门【二】]]></title>
        <id>https://flakkaqi.github.io/post/spring-boot-ru-men-er/</id>
        <link href="https://flakkaqi.github.io/post/spring-boot-ru-men-er/">
        </link>
        <updated>2020-06-22T05:50:17.000Z</updated>
        <summary type="html"><![CDATA[<p>利用Springboot构建应用程序</p>
]]></summary>
        <content type="html"><![CDATA[<p>利用Springboot构建应用程序</p>
<!-- more -->
<h3 id="一-首先在httpsstartspringio-生成一个基础的springboot项目">一、首先在https://start.spring.io/ 生成一个基础的springboot项目</h3>
<h3 id="二-编写spring-boot启动类">二、编写Spring boot启动类</h3>
<p>step1：在com.example.springboot包下创建Application.java</p>
<pre><code>package com.example.sprinboot;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import java.util.Arrays;

/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 14:31
 * @Description: springboot的启动类
 */
//@SpringBootApplication 以下几个注解的简单写法
@Configuration //标记这个类作为应用上下文bean定义的源
@EnableAutoConfiguration //告诉springboot根据类路径设置、其他bean和各种属性设置开始添加bean
@ComponentScan  //告诉spring在指定包中寻找其他组件，配置和服务，让他找到控制器controller
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args); //springboot启动应用程序的方法
    }

    //排序并打印所有由您的应用程序创建或者由springboot自动添加的所有bean。
    @Bean
    public CommandLineRunner commandLineRunner(ApplicationContext ctx) {
        return args -&gt; {
            System.out.println(&quot;Let's inspect the beans provided by Spring Boot:&quot;);
            String[] beanNames = ctx.getBeanDefinitionNames();
            Arrays.sort(beanNames);
            for (String beanName : beanNames) {
                System.out.println(beanName);
            }
        };
    }
}
</code></pre>
<p>step2：在com.example.springboot创建一个控制器HelloController.java</p>
<pre><code>package com.example.sprinboot;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 14:22
 * @Description:
 */
//该注解意味着该类可以由Spring MVC使用来处理Web请求，@Controller+@ResponseBody返回数据而不是视图
@RestController
public class HelloController {

    //该注解映射路径&quot;/&quot;index()方法上，从浏览器调用或者在命令行上使用curl时，该方法返回纯文本
    @RequestMapping(&quot;/&quot;)
    public String index() {
        return &quot;Greetings from Spring Boot!&quot;;
    }
}
</code></pre>
<p>step3：运行springboot启动类</p>
<pre><code>mvnw springt-boot:run
打印出所有的bean
</code></pre>
<p>step4：打开控制台使用curl调用该接口</p>
<pre><code>curl localhost:8080
Greetings from Spring Boot!
</code></pre>
<h3 id="三-添加单元测试">三、添加单元测试</h3>
<p>step1：添加sprinboot-test依赖</p>
<pre><code>&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
	&lt;scope&gt;test&lt;/scope&gt;
	&lt;exclusions&gt;
		&lt;exclusion&gt;
			&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
			&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;
		&lt;/exclusion&gt;
	&lt;/exclusions&gt;
&lt;/dependency&gt;
</code></pre>
<p>step2：此处介绍两种单元测试方式，一定要注意，测试包路径一定要和被测试的包路径保持一致。<br>
step2-1：模拟Http请求周期，编写简单的全栈测试</p>
<pre><code>package com.example.springboot;

import static org.assertj.core.api.Assertions.*;

import java.net.URL;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.server.LocalServerPort;
import org.springframework.http.ResponseEntity;

/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 15:50
 * @Description: 模拟Http请求周期，编写简单的全栈测试
 */
//嵌入式服务器从一个随机端口启动，并在运行时使用 @LocalServerPort发现的真实端口
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,classes = Application.class)
public class HelloControllerT {
    @LocalServerPort
    private int port;

    private URL base;

    @Autowired
    private TestRestTemplate template;

    @BeforeEach
    public void setUp() throws Exception {
        this.base = new URL(&quot;http://localhost:&quot; + port + &quot;/&quot;);
    }

    @Test
    public void getHello() throws Exception {
        ResponseEntity&lt;String&gt; response = template.getForEntity(base.toString(),
                String.class);
        assertThat(response.getBody()).isEqualTo(&quot;Greetings from Spring Boot!&quot;);
    }
}
</code></pre>
<p>step2-2：模拟通过断点的servlet请求和响应</p>
<pre><code>package com.example.springboot;

import static org.hamcrest.Matchers.equalTo;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 15:20
 * @Description: 模拟通过断点的servlet请求和响应
 */
//以下两个注解作用是注入MockMvc实例
@SpringBootTest(classes = Application.class)  //使用该注解的话要求创建整个应用程序上下文
@AutoConfigureMockMvc
public class HelloControllerTest {

    @Autowired
    private MockMvc mvc;  //通过一组便捷的构建器类将http请求发送到DispatcherServlet并对结果断言

    @Test
    public void getHello() throws Exception {
        mvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;)
                .accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk())
                .andExpect(content().string(equalTo(&quot;Greetings from Spring Boot!&quot;)));
    }
}
</code></pre>
<h3 id="四-添加生产级服务">四、添加生产级服务</h3>
<p>springboot的执行器模块提供多种管理服务（比如运行状态、审计、Bean等）<br>
step1：添加依赖</p>
<pre><code>&lt;!--springboot的执行器模块提供多种管理服务（比如运行状态、审计、Bean等）--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
<p>step2： 检查应用程序的运行状态</p>
<pre><code>$ curl localhost:8080/actuator/health
{&quot;status&quot;:&quot;UP&quot;}
</code></pre>
<p>step3：其他的参阅<a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/reference/htmlsingle/#production-ready-endpoints">端点</a></p>
<h3 id="五-springboot-源代码">五、Springboot 源代码</h3>
<p><a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-starters">Spring boot源代码</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring boot 入门【一】]]></title>
        <id>https://flakkaqi.github.io/post/spring-boot/</id>
        <link href="https://flakkaqi.github.io/post/spring-boot/">
        </link>
        <updated>2020-06-22T01:44:36.000Z</updated>
        <summary type="html"><![CDATA[<p>springboot开始第一天👶</p>
]]></summary>
        <content type="html"><![CDATA[<p>springboot开始第一天👶</p>
<!-- more -->
<h2 id="一-概述">一、 概述</h2>
<p>springboot 会让你非常容易的创建一个独立的生产级spring基础应用，而且对于它你能做的就是“开始运行”,我们采用了spring平台自主的视图和第三方文库，这样你会做最少的无用功。spring boot应用只需要非常少的配置。</p>
<h3 id="1-特点">1、特点</h3>
<pre><code>1.创建独立的Spring应用程序
2.直接嵌入Tomcat，Jetty或Undertow（无需部署WAR文件）
3.提供入门级的依赖文件来简化您的构建配置
4.尽可能的自动配置Spring和第三方库
5.提供可用于生产的功能，如指标，运行状况检查和外部配置
6.完全不会生成代码，也不需要XML配置
</code></pre>
<h3 id="2快速入门">2.快速入门</h3>
<p>step1：开始一个新的spring boot项目</p>
<pre><code>使用https://start.spring.io/ 创建一个新的WEB项目，并添加web依赖。下载压缩包到本地。
勾选示例：maven project、2.3.1、jar、8、Spring Web
</code></pre>
<p>step2：添加你的代码</p>
<pre><code>
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@SpringBootApplication
//The @RestController annotation tells Spring that this code describes an endpoint that should be made available over the web.
@RestController
public class DemoApplication {

    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }

    //The @GetMapping(“/hello”) tells Spring to use our hello() method to answer requests that get sent to the http://localhost:8080/hello address.
    @GetMapping(&quot;/hello&quot;)
    //the @RequestParam is telling Spring to expect a name value in the request, but if it’s not there, it will use the word “World” by default.
    public String hello(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;) String name) {
        return String.format(&quot;Hello %s!&quot;, name);
    }
}
  
</code></pre>
<p>The @RestController annotation tells Spring that this code describes an endpoint that should be made available over the web. The @GetMapping(“/hello”) tells Spring to use our hello() method to answer requests that get sent to the http://localhost:8080/hello address. Finally, the @RequestParam is telling Spring to expect a name value in the request, but if it’s not there, it will use the word “World” by default.</p>
<p>step3：启动项目<br>
打开控制台执行启动命令</p>
<pre><code>mvnw spring-boot:run
</code></pre>
<p>step4：在浏览器调用接口<br>
项目启动后我们会看到如下信息</p>
<p><img src="https://flakkaqi.github.io/post-images/1592797368807.png" alt="" loading="lazy"><br>
端口为 8080<br>
可以在浏览器端输入地址：http://localhost:8080/hello?name=amy进行接口调用</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[身份证校验规则]]></title>
        <id>https://flakkaqi.github.io/post/shen-fen-zheng-xiao-yan-gui-ze/</id>
        <link href="https://flakkaqi.github.io/post/shen-fen-zheng-xiao-yan-gui-ze/">
        </link>
        <updated>2020-06-20T07:51:20.000Z</updated>
        <content type="html"><![CDATA[<pre><code>     * 身份证15位编码规则：dddddd yymmdd xx p
     * dddddd：6位地区编码
     * yymmdd: 出生年(两位年)月日，如：910215
     * xx: 顺序编码，系统产生，无法确定
     * p: 性别，奇数为男，偶数为女
     * 身份证18位编码规则：dddddd yyyymmdd xxx y
     * dddddd：6位地区编码
     * yyyymmdd: 出生年(四位年)月日，如：19910215
     * xxx：顺序编码，系统产生，无法确定，奇数为男，偶数为女
     * y: 校验码，该位数值可通过前17位计算获得
     * 前17位号码加权因子为 Wi = [ 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ]
     * 验证位 Y = [ 1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2 ]
     * 如果验证码恰好是10，为了保证身份证是十八位，那么第十八位将用X来代替
     * 校验位计算公式：Y_P = mod( ∑(Ai×Wi),11 )
     * i为身份证号码1...17 位; Y_P为校验码Y所在校验码数组位置
</code></pre>
<pre><code class="language-js">         function validateIdCard(idCard){
            //15位和18位身份证号码的正则表达式
            var regIdCard=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;
            //如果通过该验证，说明身份证格式正确，但准确性还需计算
            if(regIdCard.test(idCard)){
                if(idCard.length==18){
                    var idCardWi=new Array( 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ); //将前17位加权因子保存在数组里
                    var idCardY=new Array( 1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2 ); //这是除以11后，可能产生的11位余数、验证码，也保存成数组
                    var idCardWiSum=0; //用来保存前17位各自乖以加权因子后的总和
                    for(var i=0;i&lt;17;i++){
                        idCardWiSum+=idCard.substring(i,i+1)*idCardWi[i];
                    }
                    var idCardMod=idCardWiSum%11;//计算出校验码所在数组的位置
                    var idCardLast=idCard.substring(17);//得到最后一位身份证号码
                    //如果等于2，则说明校验码是10，身份证号码最后一位应该是X
                    if(idCardMod==2){
                        if(idCardLast==&quot;X&quot;||idCardLast==&quot;x&quot;){
                            alert(&quot;恭喜通过验证啦！&quot;);
                        }else{
                            alert(&quot;身份证号码错误！&quot;);
                        }
                    }else{
                        //用计算出的验证码与最后一位身份证号码匹配，如果一致，说明通过，否则是无效的身份证号码
                        if(idCardLast==idCardY[idCardMod]){
                            alert(&quot;恭喜通过验证啦！&quot;);
                        }else{
                            alert(&quot;身份证号码错误！&quot;);
                        }
                    }
                }
            }else{
                alert(&quot;身份证格式不正确!&quot;);
            }
        }
    ``` 
![](https://flakkaqi.github.io/post-images/1592639889017.png)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[springboot+mybatis+swaager]]></title>
        <id>https://flakkaqi.github.io/post/springbootmybatisswaager/</id>
        <link href="https://flakkaqi.github.io/post/springbootmybatisswaager/">
        </link>
        <updated>2020-06-09T06:25:40.000Z</updated>
        <summary type="html"><![CDATA[<p>Spring Boot使用MyBatis Generator、Swagger、MyBatis是Java目前主流的ORM框架，可以参考这篇文章：<a href="http://www.ityouknow.com/springboot/2016/11/06/spring-boot-mybatis.html">在Spring Boot中使用MyBatis</a><br>
这篇文章来将介绍MyBatis Generator，（简称MBG，下文使用这个简称），该插件可以很方便的生成实体类、Mapper接口代码等，提高开发效率，它有点像.NET的EF框架中的DB First。另外，顺便介绍Spring Boot如何集成Swagger。</p>
]]></summary>
        <content type="html"><![CDATA[<p>Spring Boot使用MyBatis Generator、Swagger、MyBatis是Java目前主流的ORM框架，可以参考这篇文章：<a href="http://www.ityouknow.com/springboot/2016/11/06/spring-boot-mybatis.html">在Spring Boot中使用MyBatis</a><br>
这篇文章来将介绍MyBatis Generator，（简称MBG，下文使用这个简称），该插件可以很方便的生成实体类、Mapper接口代码等，提高开发效率，它有点像.NET的EF框架中的DB First。另外，顺便介绍Spring Boot如何集成Swagger。</p>
<!-- more -->
<p><a href="https://www.cnblogs.com/FireworksEasyCool/p/11133827.html">点击跳转参考文章</a></p>
<h2 id="一-创建mysql数据库">一、创建MySQL数据库</h2>
<pre><code class="language-sql">create database generatortest default character set utf8mb4 collate utf8mb4_unicode_ci;
use generatortest;
create user 'generatortest'@'localhost' identified by 'generatortest123';
grant all privileges on generatortest.* to 'generatortest'@'localhost';
flush privileges;

CREATE TABLE `user`
(
  id INT NOT NULL AUTO_INCREMENT COMMENT '用户ID',
  user_name VARCHAR(50) NOT NULL COMMENT '用户名',
  `password` VARCHAR(50) NOT NULL COMMENT '密码',
  email VARCHAR(50) COMMENT '邮箱',
  avatar VARCHAR(255) COMMENT '头像',
  create_time DATETIME NOT NULL COMMENT '创建时间',
    update_time DATETIME NOT NULL COMMENT '更新时间',
    deleted TINYINT(1) default 0 COMMENT '逻辑删除',
  PRIMARY KEY (id)
);
ALTER TABLE `user` COMMENT '用户表';

CREATE TABLE role
(
  id INT NOT NULL AUTO_INCREMENT COMMENT '角色ID',
  role_name VARCHAR(50) NOT NULL COMMENT '角色名',
  enabled TINYINT(1) default 1 NOT NULL COMMENT '有效标志',
  create_time DATETIME NOT NULL COMMENT '创建时间',
    update_time DATETIME NOT NULL COMMENT '更新时间',
    deleted TINYINT(1) default 0 NOT NULL COMMENT '逻辑删除',
  PRIMARY KEY (id)
);
ALTER TABLE role COMMENT '角色表';

CREATE TABLE permission
(
  id INT NOT NULL AUTO_INCREMENT COMMENT '权限ID',
  permission_name VARCHAR(50) NOT NULL COMMENT '权限名称',
  permission_value VARCHAR(200) NOT NULL COMMENT '权限值',
  PRIMARY KEY (id)
);
ALTER TABLE permission COMMENT '权限表';

CREATE TABLE user_role
(
  user_id INT NOT NULL COMMENT '用户ID',
  role_id INT NOT NULL COMMENT '角色ID'
);
ALTER TABLE user_role COMMENT '用户角色关联表';

CREATE TABLE role_permission
(
  role_id INT NOT NULL COMMENT '角色ID',
  permission_id INT NOT NULL COMMENT '权限ID'
);
ALTER TABLE role_permission COMMENT '角色权限关联表';
</code></pre>
<h2 id="二-创建maven项目">二、创建maven项目</h2>
<h3 id="1-创建maven工程">1、创建maven工程</h3>
<p>可以参考<a href="https://www.cnblogs.com/qinxu/p/9648429.html">idea创建maven项目</a></p>
<h3 id="2-pomxml">2、pom.xml</h3>
<pre><code class="language-xml">&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.0.8&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.5.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;
            &lt;version&gt;1.3.7&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    ```
### 3、

![](https://flakkaqi.github.io/post-images/1592639968494.webp)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[springboot创建定时任务]]></title>
        <id>https://flakkaqi.github.io/post/springboot-chuang-jian-ding-shi-ren-wu/</id>
        <link href="https://flakkaqi.github.io/post/springboot-chuang-jian-ding-shi-ren-wu/">
        </link>
        <updated>2020-06-09T03:43:42.000Z</updated>
        <summary type="html"><![CDATA[<p>😕最简单的定时任务。定时时间最好放在配置文件里。</p>
]]></summary>
        <content type="html"><![CDATA[<p>😕最简单的定时任务。定时时间最好放在配置文件里。</p>
<!-- more -->
<h3 id="定时任务">定时任务</h3>
<pre><code class="language-java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import org.springframework.scheduling.annotation.EnableScheduling;
import org.springframework.scheduling.annotation.Scheduled;

@Configuration      //1.主要用于标记配置类，兼备Component的效果。
@EnableScheduling   // 2.开启定时任务
public class QuestionnaireTimingJob {

    private static final Logger logger = LoggerFactory.getLogger(QuestionnaireTimingJob.class);

    @Value(&quot;${task.questionnaireJob.baseRestUrl}&quot;)
    private String baseUrl;

    @Scheduled(cron = &quot;${task.questionnaireJob.corn}&quot;)
    public void process() {
        logger.info(&quot;执行静态定时任务:xxxxxxx&quot;+ LocalDateTime.now());
    }
}
</code></pre>
<h3 id="配置文件application-jobyml">配置文件：application-job.yml</h3>
<pre><code class="language-yml">task:
  questionnaireJob:
    corn: 0 0 23 * * ?
    baseRestUrl：http://xxxx.xxx.cclssksls.cclslls/skss/
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1591674724449.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[springboot注解读取配置文件的值]]></title>
        <id>https://flakkaqi.github.io/post/springboot-zhu-jie-du-qu-pei-zhi-wen-jian-de-zhi/</id>
        <link href="https://flakkaqi.github.io/post/springboot-zhu-jie-du-qu-pei-zhi-wen-jian-de-zhi/">
        </link>
        <updated>2020-06-09T03:08:25.000Z</updated>
        <summary type="html"><![CDATA[<p>通常我会将一些会变得信息放到配置文件中方便后期上线或者后期维护时进行修改，在springboot项目中如何方便的读取配置文件中的值，以下将介绍两个注解：</p>
]]></summary>
        <content type="html"><![CDATA[<p>通常我会将一些会变得信息放到配置文件中方便后期上线或者后期维护时进行修改，在springboot项目中如何方便的读取配置文件中的值，以下将介绍两个注解：</p>
<!-- more -->
<p>配置文件：questionnaire.properties</p>
<pre><code>baseRestUrl=http://xxxxxx.xxx.xxxx.cn/questionnaire/
</code></pre>
<p>使用该配置文件的类</p>
<pre><code>@PropertySource(&quot;classpath:questionnaire.properties&quot;)
public class QuestionnaireTimingJob {
        @Value(&quot;${baseRestUrl}&quot;)
         private String baseUrl;
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1591673719380.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[全角、半角对照表]]></title>
        <id>https://flakkaqi.github.io/post/quan-jiao-ban-jiao-dui-zhao-biao/</id>
        <link href="https://flakkaqi.github.io/post/quan-jiao-ban-jiao-dui-zhao-biao/">
        </link>
        <updated>2020-06-03T08:39:54.000Z</updated>
        <summary type="html"><![CDATA[<p>🤡用户输入的全角可能在后台处理成半角，很多方法并不适用所有的全角半角转换，所以，最简单粗暴的方法就是遍历.......</p>
]]></summary>
        <content type="html"><![CDATA[<p>🤡用户输入的全角可能在后台处理成半角，很多方法并不适用所有的全角半角转换，所以，最简单粗暴的方法就是遍历.......</p>
<!-- more -->
<h3 id="全角半角字符对照表">全角半角字符对照表</h3>
<pre><code>ａ a ｂ b ｃ c ｄ d ｅ e ｆ f ｇ g ｈ h ｉ i ｊ j ｋ k ｌ l ｍ m ｎ n ｏ o ｐ p ｑ q ｒ r ｓ s ｔ t ｕ u ｖ v ｗ w ｘ x ｙ y ｚ z Ａ A Ｂ B Ｃ C Ｄ D Ｅ E Ｆ F Ｇ G Ｈ H Ｉ I Ｊ J Ｋ K Ｌ L Ｍ M Ｎ N Ｏ O Ｐ P Ｑ Q Ｒ R Ｓ S Ｔ T Ｕ U Ｖ V Ｗ W Ｘ X Ｙ Y Ｚ Z １ 1 ２ 2 ３ 3 ４ 4 ５ 5 ６ 6 ７ 7 ８ 8 ９ 9 ０ 0 ｀ ` ” &quot; ’ ' “ &quot; ‘ ' ＿ _ － - ～ ~ ＝ = ＋ + ＼ \ ｜ | ／ / （ ( ） ) ［ [ ］ ] 【 [ 】 ] ｛ { ｝ } ＜ &lt; ＞ &gt; ． . ， , ； ; ： : ！ ! ＾ ^ ％ % ＃ # ＠ @ ＄ $ ＆ &amp; ？ ? ＊ * 。 .
</code></pre>
<pre><code class="language-java">public static void main(String[] args) {
        String arr = &quot;中国，中文，标点符号！你好？１２３４５＠＃【】+=-（）。&quot;;
        char[] chars = arr.toCharArray();
        char[][] charTable = {
               {'ａ', 'ｂ', 'ｃ', 'ｄ', 'ｅ', 'ｆ', 'ｇ', 'ｈ', 'ｉ', 'ｊ', 'ｋ', 'ｌ', 'ｍ', 'ｎ', 'ｏ', 'ｐ', 'ｑ',
                        'ｒ', 'ｓ', 'ｔ', 'ｕ', 'ｖ', 'ｗ', 'ｘ', 'ｙ', 'ｚ', 'Ａ', 'Ｂ', 'Ｃ', 'Ｄ', 'Ｅ', 'Ｆ', 'Ｇ',
                        'Ｈ', 'Ｉ', 'Ｊ', 'Ｋ', 'Ｌ', 'Ｍ', 'Ｎ', 'Ｏ', 'Ｐ', 'Ｑ', 'Ｒ', 'Ｓ', 'Ｔ', 'Ｕ', 'Ｖ', 'Ｗ',
                        'Ｘ', 'Ｙ', 'Ｚ', '１', '２', '３', '４', '５', '６', '７', '８', '９', '０', '｀', '”', '’',
                        '“', '‘', '＿', '－', '～', '＝', '＋', '＼', '｜', '／', '（', '）', '［', '］', '【', '】',
                        '｛', '｝', '＜', '＞', '．', '，', '；', '：', '！', '＾', '％', '＃', '＠', '＄', '＆', '？',
                        '＊', '。','　'},
                {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',
                        'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
                        'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '1', '2', '3', '4', '5', '6',
                        '7', '8', '9', '0', '`', '&quot;', '\'', '&quot;', '\'', '_', '-', '~', '=', '+', '\\', '|', '/',
                        '(', ')', '[', ']', '[', ']', '{', '}', '&lt;', '&gt;', '.', ',', ';', ':', '!', '^', '%', '#', '@',
                        '$', '&amp;', '?', '*', '.',' '}
        };
        for (int i = 0; i &lt; chars.length; i++) {
            for (int j = 0; j &lt; charTable[0].length; j++) {
                if (chars[i] == charTable[0][j]) {
                    chars[i] = charTable[1][j];
                }
            }
        }
        System.out.println(String.valueOf(chars));
    }
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1591178131634.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mybatisplus代码生成器]]></title>
        <id>https://flakkaqi.github.io/post/mybatisplus-dai-ma-sheng-cheng-qi/</id>
        <link href="https://flakkaqi.github.io/post/mybatisplus-dai-ma-sheng-cheng-qi/">
        </link>
        <updated>2020-05-29T01:20:53.000Z</updated>
        <summary type="html"><![CDATA[<p>😇使用myabtisplus代码生成器可以大大提升代码的开发效率</p>
]]></summary>
        <content type="html"><![CDATA[<p>😇使用myabtisplus代码生成器可以大大提升代码的开发效率</p>
<!-- more -->
<h3 id="引入依赖">引入依赖</h3>
<pre><code class="language-java">import com.baomidou.mybatisplus.enums.IdType;
import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.GlobalConfig;
import com.baomidou.mybatisplus.generator.config.PackageConfig;
import com.baomidou.mybatisplus.generator.config.StrategyConfig;
import com.baomidou.mybatisplus.generator.config.rules.DbType;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
</code></pre>
<h3 id="工具类">工具类</h3>
<pre><code class="language-java">
public class GeneratorTest {

    public static void main(String[] args) {
        //1、全局配置
        GlobalConfig config = new GlobalConfig();
        config.setActiveRecord(true)//开启AR模式
                .setAuthor(&quot;qishuai&quot;)//设置作者
                //生成路径(一般都是生成在此项目的src/main/java下面)
                .setOutputDir(&quot;C:\\javaProject\\spacework\\src\\main\\java&quot;)
                .setFileOverride(false)//第二次生成不会把第一次生成的覆盖掉
                .setIdType(IdType.AUTO)//主键策略
                .setServiceName(&quot;%sService&quot;)//生成的service接口名字首字母是否为I，这样设置就没有I
                .setBaseResultMap(true)//生成resultMap
                .setBaseColumnList(true)//在xml中生成基础列
                .setOpen(false);//当代码生成完成之后是否打开代码所在的文件夹
        //2、数据源配置
        DataSourceConfig dataSourceConfig = new DataSourceConfig();
        dataSourceConfig.setDbType(DbType.ORACLE)//数据库类型
                .setDriverName(&quot;dm.jdbc.driver.DmDriver&quot;)
                .setUrl(&quot;jdbc:**://**.**.**.**:****:****/***&quot;)
                .setUsername(&quot;******&quot;)
                .setPassword(&quot;*******&quot;);
        //3、策略配置
        StrategyConfig strategyConfig = new StrategyConfig();
        strategyConfig.setCapitalMode(true)//开启全局大写命名
                .setDbColumnUnderline(true)//表名字段名使用下划线
                .setNaming(NamingStrategy.underline_to_camel)//下划线到驼峰的命名方式
                .setTablePrefix(&quot;&quot;)//表名前缀
                .setEntityLombokModel(true)//使用lombok
                .setInclude(&quot;BASIC_DATA_T&quot;);//逆向工程使用的表
        //4、包名策略配置
        PackageConfig packageConfig = new PackageConfig();
        packageConfig.setParent(&quot;com.test.bapp.demo&quot;)//设置包名的parent
                .setMapper(&quot;mapper&quot;)
                .setService(&quot;service&quot;)
                .setController(&quot;controller&quot;)
                .setEntity(&quot;entity&quot;)
                .setXml(&quot;mapper.mapping&quot;);//设置xml文件的目录
        //5、整合配置
        AutoGenerator autoGenerator = new AutoGenerator();
        autoGenerator.setGlobalConfig(config)
                .setDataSource(dataSourceConfig)
                .setStrategy(strategyConfig)
                .setPackageInfo(packageConfig);
        //6、执行
        autoGenerator.execute();
    }
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1590716277577.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[java导出EXCEL工具类]]></title>
        <id>https://flakkaqi.github.io/post/java-dao-chu-excel-gong-ju-lei/</id>
        <link href="https://flakkaqi.github.io/post/java-dao-chu-excel-gong-ju-lei/">
        </link>
        <updated>2020-05-27T09:53:07.000Z</updated>
        <summary type="html"><![CDATA[<p>😄后端将数据生成excel文件，以流的形式返回给前端。</p>
]]></summary>
        <content type="html"><![CDATA[<p>😄后端将数据生成excel文件，以流的形式返回给前端。</p>
<!-- more -->
<p>一、将查询结果集封装为实体集合</p>
<pre><code class="language-java">import com.alibaba.excel.annotation.ExcelProperty;
import com.alibaba.excel.metadata.BaseRowModel;
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import lombok.Data;
import lombok.EqualsAndHashCode;
/**
 * @Auther: QiShuai
 * @Date: 2020/5/27 14:26
 * @Description: EXCEL数据获取
 */
@Data
@EqualsAndHashCode(callSuper = false)
@ApiModel(&quot;EXCEL数据获取&quot;)
public class ConsultExcelResp extends BaseRowModel {

    @ExcelProperty(value = &quot;提交人&quot;,index = 0)  //excle对应的列数
    @ApiModelProperty(&quot;提交人&quot;)
    private String userName;

    @ExcelProperty(value = &quot;省份&quot;,index = 1) //excle对应的列数
    @ApiModelProperty(&quot;省份&quot;)
    private String province;
}
</code></pre>
<p>二、工具类</p>
<pre><code class="language-java">package cn.gwssi.bapp.common.exportExcel;

import com.alibaba.excel.EasyExcel;
import com.alibaba.excel.metadata.BaseRowModel;
import com.alibaba.excel.support.ExcelTypeEnum;
import org.apache.poi.hssf.usermodel.*;

import javax.servlet.http.HttpServletResponse;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.List;

public class ExcelUtil {

    /**
     * 生成excel
     * @param sheetName
     * @param title
     * @param values
     * @param wb
     * @return
     */
    public static HSSFWorkbook getHSSFWorkbook(String sheetName, String[] title, String[][] values, HSSFWorkbook wb) {

        // 第一步，创建一个HSSFWorkbook，对应一个Excel文件
        if (wb == null) {
            wb = new HSSFWorkbook();
        }

        // 第二步，在workbook中添加一个sheet,对应Excel文件中的sheet
        HSSFSheet sheet = wb.createSheet(sheetName);

        // 第三步，在sheet中添加表头第0行,注意老版本poi对Excel的行数列数有限制
        HSSFRow row = sheet.createRow(0);

        // 第四步，创建单元格，并设置值表头 设置表头居中
        HSSFCellStyle style = wb.createCellStyle();
        /*style.setAlignment(HSSFCellStyle.ALIGN_CENTER); // 创建一个居中格式*/

        // 声明列对象
        HSSFCell cell = null;

        // 创建标题
        for (int i = 0; i &lt; title.length; i++) {
            cell = row.createCell(i);
            cell.setCellValue(title[i]);
            cell.setCellStyle(style);
        }

        // 创建内容
        for (int i = 0; i &lt; values.length; i++) {
            row = sheet.createRow(i + 1);
            for (int j = 0; j &lt; values[i].length; j++) {
                // 将内容按顺序赋给对应的列对象
                row.createCell(j).setCellValue(values[i][j]);
            }
        }
        return wb;
    }

    /**
     * 发送响应流方法
     * @param response
     * @param fileName
     */
    public static void setResponseHeader(HttpServletResponse response, String fileName) {
        try {
            try {
                fileName = new String(fileName.getBytes(),&quot;ISO8859-1&quot;);
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            response.setContentType(&quot;application/octet-stream;charset=ISO8859-1&quot;);
            response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename=&quot;+ fileName);
            response.addHeader(&quot;Pargam&quot;, &quot;no-cache&quot;);
            response.addHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);
            response.setCharacterEncoding(&quot;UTF-8&quot;);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    /**
     *
     * 功能描述: 写excel内容
     *
     * @param:
     * @return:
     * @auther: jiaoguojin
     * @date: 2020/3/28 17:38
     */
    public static void writeExcel(String fileName, List&lt;? extends BaseRowModel&gt; resultList,
                                  HttpServletResponse response, Class dataClass) throws Exception {
        EasyExcel.write(getOutputStream(fileName,response), dataClass)
                .excelType(ExcelTypeEnum.XLSX)
                .sheet(fileName)
                .doWrite(resultList);
    }
    /**
     *
     * 功能描述: 写excel内容 动态表头
     *
     * @param:
     * @return:
     * @auther: ykf
     * @date: 2020/3/28 17:38
     */
    public static void writeExcel(String fileName, List resultList,
                                              HttpServletResponse response, Class dataClass, File templateFile) throws Exception {
        EasyExcel.write(getOutputStream(fileName,response))
                .head(dataClass)
                .withTemplate(templateFile)
                .sheet(0)
                .doWrite(resultList);

//        // 这里 需要指定写用哪个class去写
//        ExcelWriter excelWriter = EasyExcel.write(getOutputStream(fileName,response),dataClass).withTemplate(templateFile).build();
//
//        // 把sheet设置为不需要头 不然会输出sheet的头 这样看起来第一个table 就有2个头了
//        WriteSheet writeSheet = EasyExcel.writerSheet(0).needHead(Boolean.FALSE).build();
//
//        // 这里必须指定需要头，table 会继承sheet的配置，sheet配置了不需要，table 默认也是不需要
//        WriteTable writeTable0 = EasyExcel.writerTable(0).needHead(Boolean.FALSE).build();
//        WriteTable writeTable1 = EasyExcel.writerTable(1).needHead(Boolean.TRUE).build();
//        writeTable0.setHead(head());
//        writeTable0.setRelativeHeadRowIndex(-2);
//        writeTable1.setRelativeHeadRowIndex(0);
//        // 第一次写入会创建头
//        List&lt;test&gt; list = new ArrayList();
//        list.add(new test(&quot;23423423423&quot;,&quot;aseraerawerf&quot;));
//        list.add(new test(&quot;234238888888888&quot;,&quot;aseraerdddddddddddddddd&quot; +
//                &quot;+awerf&quot;));
//        excelWriter.write(list, writeSheet, writeTable0);
//        // 第二次写如也会创建头，然后在第一次的后面写入数据
//        excelWriter.write(resultList, writeSheet, writeTable1);
//        // 千万别忘记finish 会帮忙关闭流
//        excelWriter.finish();
    }
    /**
     *
     * 功能描述: 导出文件时为Writer生成OutputStream
     *
     * @param:
     * @return:
     * @auther: jiaoguojin
     * @date: 2020/3/27 18:53
     */
    private static OutputStream getOutputStream(String fileName,
                                                HttpServletResponse response) throws Exception {
        try {
            fileName = URLEncoder.encode(fileName, &quot;UTF-8&quot;);
            response.setContentType(&quot;application/vnd.ms-excel&quot;);
            response.setCharacterEncoding(&quot;utf8&quot;);
            response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + fileName + &quot;.xlsx&quot;);
            response.setHeader(&quot;Pragma&quot;, &quot;public&quot;);
            response.setHeader(&quot;Cache-Control&quot;, &quot;no-store&quot;);
            response.addHeader(&quot;Cache-Control&quot;, &quot;max-age=0&quot;);
            return response.getOutputStream();
        } catch (IOException e) {
            throw new Exception(&quot;导出excel表格失败!&quot;, e);
        }
    }


    private static List&lt;List&lt;String&gt;&gt; head() {
        List&lt;List&lt;String&gt;&gt; list = new ArrayList&lt;List&lt;String&gt;&gt;();
        List&lt;String&gt; head0 = new ArrayList&lt;String&gt;();
        head0.add(&quot;字符串&quot; + System.currentTimeMillis());
        List&lt;String&gt; head1 = new ArrayList&lt;String&gt;();
        head1.add(&quot;数字&quot; + System.currentTimeMillis());
        List&lt;String&gt; head2 = new ArrayList&lt;String&gt;();
        head2.add(&quot;日期&quot; + System.currentTimeMillis());
        list.add(head0);
        list.add(head1);
        list.add(head2);
        return list;
    }
}
</code></pre>
<p>三、使用示例</p>
<pre><code class="language-java">public void consultListToExcel(HttpServletResponse response) throws Exception {
  List&lt;ConsultExcelResp&gt; list = xxwConsultTMapper.getConsultListToExcel();
  String filename = &quot;网上咨询回复表&quot;;
  ExcelUtil.writeExcel(filename, list, response, ConsultExcelResp.class);
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1590573767663.webp" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java http请求工具类]]></title>
        <id>https://flakkaqi.github.io/post/java-http-qing-qiu-gong-ju-lei/</id>
        <link href="https://flakkaqi.github.io/post/java-http-qing-qiu-gong-ju-lei/">
        </link>
        <updated>2020-05-12T12:21:48.000Z</updated>
        <summary type="html"><![CDATA[<p>😚个人觉得时非常简单实用。</p>
]]></summary>
        <content type="html"><![CDATA[<p>😚个人觉得时非常简单实用。</p>
<!-- more -->
<pre><code class="language-java">package cn.gwssi.bapp.common.util;

import com.alibaba.fastjson.JSONObject;
import org.apache.http.HttpEntity;
import org.apache.http.HttpStatus;
import org.apache.http.client.config.RequestConfig;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.IOException;

/**
 * HttpClient工具类
 */
public class HttpClientUtils {
    private static Logger logger = LoggerFactory.getLogger(HttpClientUtils.class); // 日志记录

    private static RequestConfig requestConfig = null;

    static {
        // 设置请求和传输超时时间
        requestConfig = RequestConfig.custom().setSocketTimeout(60000).setConnectTimeout(60000).build();
    }

    /**
     * post请求传输json参数
     *
     * @param url       url地址
     * @param jsonParam 参数
     * @return
     */
    public static JSONObject httpPost(String url, JSONObject jsonParam) {
        // post请求返回结果
        CloseableHttpClient httpClient = HttpClients.createDefault();
        JSONObject jsonResult = null;
        HttpPost httpPost = new HttpPost(url);
        // 设置请求和传输超时时间
        httpPost.setConfig(requestConfig);
        try {
            if (null != jsonParam) {
                // 解决中文乱码问题
                StringEntity entity = new StringEntity(jsonParam.toString(), &quot;utf-8&quot;);
                entity.setContentEncoding(&quot;UTF-8&quot;);
                entity.setContentType(&quot;application/json&quot;);
                httpPost.setEntity(entity);
            }
            CloseableHttpResponse result = httpClient.execute(httpPost);
            // 请求发送成功，并得到响应
            if (result.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String str = &quot;&quot;;
                try {
                    // 读取服务器返回过来的json字符串数据
                    str = EntityUtils.toString(result.getEntity(), &quot;utf-8&quot;);
                    // 把json字符串转换成json对象
                    jsonResult = JSONObject.parseObject(str);
                } catch (Exception e) {
                    logger.error(&quot;post请求提交失败:&quot; + url, e);
                }
            }
        } catch (IOException e) {
            logger.error(&quot;post请求提交失败:&quot; + url, e);
        } finally {
            httpPost.releaseConnection();
        }
        return jsonResult;
    }

    /**
     * post请求传输String参数 例如：name=Jack&amp;sex=1&amp;type=2
     * Content-type:application/x-www-form-urlencoded
     *
     * @param url      url地址
     * @param strParam 参数
     * @return
     */
    public static JSONObject httpPost(String url, String strParam) {
        // post请求返回结果
        CloseableHttpClient httpClient = HttpClients.createDefault();
        JSONObject jsonResult = null;
        HttpPost httpPost = new HttpPost(url);
        httpPost.setConfig(requestConfig);
        try {
            if (null != strParam) {
                // 解决中文乱码问题
                StringEntity entity = new StringEntity(strParam, &quot;utf-8&quot;);
                entity.setContentEncoding(&quot;UTF-8&quot;);
                entity.setContentType(&quot;application/x-www-form-urlencoded&quot;);
                httpPost.setEntity(entity);
            }
            CloseableHttpResponse result = httpClient.execute(httpPost);
            // 请求发送成功，并得到响应
            if (result.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String str = &quot;&quot;;
                try {
                    // 读取服务器返回过来的json字符串数据
                    str = EntityUtils.toString(result.getEntity(), &quot;utf-8&quot;);
                    // 把json字符串转换成json对象
                    jsonResult = JSONObject.parseObject(str);
                } catch (Exception e) {
                    logger.error(&quot;post请求提交失败:&quot; + url, e);
                }
            }
        } catch (IOException e) {
            logger.error(&quot;post请求提交失败:&quot; + url, e);
        } finally {
            httpPost.releaseConnection();
        }
        return jsonResult;
    }

    /**
     * 发送get请求
     *
     * @param url 路径
     * @return
     */
    public static JSONObject httpGet(String url) {
        // get请求返回结果
        JSONObject jsonResult = null;
        CloseableHttpClient client = HttpClients.createDefault();
        // 发送get请求
        HttpGet request = new HttpGet(url);
        request.setConfig(requestConfig);
        try {
            CloseableHttpResponse response = client.execute(request);

            // 请求发送成功，并得到响应
            if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                // 读取服务器返回过来的json字符串数据
                HttpEntity entity = response.getEntity();
                String strResult = EntityUtils.toString(entity, &quot;utf-8&quot;);
                // 把json字符串转换成json对象
                jsonResult = JSONObject.parseObject(strResult);
            } else {
                logger.error(&quot;get请求提交失败:&quot; + url);
            }
        } catch (IOException e) {
            logger.error(&quot;get请求提交失败:&quot; + url, e);
        } finally {
            request.releaseConnection();
        }
        return jsonResult;
    }

    /**
     * post请求传输String参数 例如：name=Jack&amp;sex=1&amp;type=2
     * Content-type:application/x-www-form-urlencoded
     *
     * @param url      url地址
     * @param strParam 参数
     * @return String
     */
    public static String httpPostStr(String url, String strParam) {
        String str = &quot;&quot;;
        // post请求返回结果
        CloseableHttpClient httpClient = HttpClients.createDefault();
        JSONObject jsonResult = null;
        HttpPost httpPost = new HttpPost(url);
        httpPost.setConfig(requestConfig);
        try {
            if (null != strParam) {
                // 解决中文乱码问题
                StringEntity entity = new StringEntity(strParam, &quot;utf-8&quot;);
                entity.setContentEncoding(&quot;UTF-8&quot;);
                entity.setContentType(&quot;application/x-www-form-urlencoded&quot;);
                httpPost.setEntity(entity);
            }
            CloseableHttpResponse result = httpClient.execute(httpPost);
            // 请求发送成功，并得到响应
            if (result.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {

                try {
                    // 读取服务器返回过来的json字符串数据
                    str = EntityUtils.toString(result.getEntity(), &quot;utf-8&quot;);
                    // 把json字符串转换成json对象
                    /*jsonResult = JSONObject.parseObject(str);*/
                } catch (Exception e) {
                    logger.error(&quot;post请求提交失败:&quot; + url, e);
                }
            }
        } catch (IOException e) {
            logger.error(&quot;post请求提交失败:&quot; + url, e);
        } finally {
            httpPost.releaseConnection();
        }
        return str;
    }

}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589286418244.webp" alt="" loading="lazy"></figure>
]]></content>
    </entry>
</feed>