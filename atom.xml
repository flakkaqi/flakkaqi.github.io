<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://flakkaqi.github.io</id>
    <title>祁先生的微博客</title>
    <updated>2020-05-12T12:35:21.158Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://flakkaqi.github.io"/>
    <link rel="self" href="https://flakkaqi.github.io/atom.xml"/>
    <subtitle>You dida dida me , I huala hula you</subtitle>
    <logo>https://flakkaqi.github.io/images/avatar.png</logo>
    <icon>https://flakkaqi.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, 祁先生的微博客</rights>
    <entry>
        <title type="html"><![CDATA[Java http请求工具类]]></title>
        <id>https://flakkaqi.github.io/post/java-http-qing-qiu-gong-ju-lei/</id>
        <link href="https://flakkaqi.github.io/post/java-http-qing-qiu-gong-ju-lei/">
        </link>
        <updated>2020-05-12T12:21:48.000Z</updated>
        <summary type="html"><![CDATA[<p>😚个人觉得时非常简单实用。</p>
]]></summary>
        <content type="html"><![CDATA[<p>😚个人觉得时非常简单实用。</p>
<!-- more -->
<pre><code class="language-java">package cn.gwssi.bapp.common.util;

import com.alibaba.fastjson.JSONObject;
import org.apache.http.HttpEntity;
import org.apache.http.HttpStatus;
import org.apache.http.client.config.RequestConfig;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.IOException;

/**
 * HttpClient工具类
 */
public class HttpClientUtils {
    private static Logger logger = LoggerFactory.getLogger(HttpClientUtils.class); // 日志记录

    private static RequestConfig requestConfig = null;

    static {
        // 设置请求和传输超时时间
        requestConfig = RequestConfig.custom().setSocketTimeout(60000).setConnectTimeout(60000).build();
    }

    /**
     * post请求传输json参数
     *
     * @param url       url地址
     * @param jsonParam 参数
     * @return
     */
    public static JSONObject httpPost(String url, JSONObject jsonParam) {
        // post请求返回结果
        CloseableHttpClient httpClient = HttpClients.createDefault();
        JSONObject jsonResult = null;
        HttpPost httpPost = new HttpPost(url);
        // 设置请求和传输超时时间
        httpPost.setConfig(requestConfig);
        try {
            if (null != jsonParam) {
                // 解决中文乱码问题
                StringEntity entity = new StringEntity(jsonParam.toString(), &quot;utf-8&quot;);
                entity.setContentEncoding(&quot;UTF-8&quot;);
                entity.setContentType(&quot;application/json&quot;);
                httpPost.setEntity(entity);
            }
            CloseableHttpResponse result = httpClient.execute(httpPost);
            // 请求发送成功，并得到响应
            if (result.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String str = &quot;&quot;;
                try {
                    // 读取服务器返回过来的json字符串数据
                    str = EntityUtils.toString(result.getEntity(), &quot;utf-8&quot;);
                    // 把json字符串转换成json对象
                    jsonResult = JSONObject.parseObject(str);
                } catch (Exception e) {
                    logger.error(&quot;post请求提交失败:&quot; + url, e);
                }
            }
        } catch (IOException e) {
            logger.error(&quot;post请求提交失败:&quot; + url, e);
        } finally {
            httpPost.releaseConnection();
        }
        return jsonResult;
    }

    /**
     * post请求传输String参数 例如：name=Jack&amp;sex=1&amp;type=2
     * Content-type:application/x-www-form-urlencoded
     *
     * @param url      url地址
     * @param strParam 参数
     * @return
     */
    public static JSONObject httpPost(String url, String strParam) {
        // post请求返回结果
        CloseableHttpClient httpClient = HttpClients.createDefault();
        JSONObject jsonResult = null;
        HttpPost httpPost = new HttpPost(url);
        httpPost.setConfig(requestConfig);
        try {
            if (null != strParam) {
                // 解决中文乱码问题
                StringEntity entity = new StringEntity(strParam, &quot;utf-8&quot;);
                entity.setContentEncoding(&quot;UTF-8&quot;);
                entity.setContentType(&quot;application/x-www-form-urlencoded&quot;);
                httpPost.setEntity(entity);
            }
            CloseableHttpResponse result = httpClient.execute(httpPost);
            // 请求发送成功，并得到响应
            if (result.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String str = &quot;&quot;;
                try {
                    // 读取服务器返回过来的json字符串数据
                    str = EntityUtils.toString(result.getEntity(), &quot;utf-8&quot;);
                    // 把json字符串转换成json对象
                    jsonResult = JSONObject.parseObject(str);
                } catch (Exception e) {
                    logger.error(&quot;post请求提交失败:&quot; + url, e);
                }
            }
        } catch (IOException e) {
            logger.error(&quot;post请求提交失败:&quot; + url, e);
        } finally {
            httpPost.releaseConnection();
        }
        return jsonResult;
    }

    /**
     * 发送get请求
     *
     * @param url 路径
     * @return
     */
    public static JSONObject httpGet(String url) {
        // get请求返回结果
        JSONObject jsonResult = null;
        CloseableHttpClient client = HttpClients.createDefault();
        // 发送get请求
        HttpGet request = new HttpGet(url);
        request.setConfig(requestConfig);
        try {
            CloseableHttpResponse response = client.execute(request);

            // 请求发送成功，并得到响应
            if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                // 读取服务器返回过来的json字符串数据
                HttpEntity entity = response.getEntity();
                String strResult = EntityUtils.toString(entity, &quot;utf-8&quot;);
                // 把json字符串转换成json对象
                jsonResult = JSONObject.parseObject(strResult);
            } else {
                logger.error(&quot;get请求提交失败:&quot; + url);
            }
        } catch (IOException e) {
            logger.error(&quot;get请求提交失败:&quot; + url, e);
        } finally {
            request.releaseConnection();
        }
        return jsonResult;
    }

    /**
     * post请求传输String参数 例如：name=Jack&amp;sex=1&amp;type=2
     * Content-type:application/x-www-form-urlencoded
     *
     * @param url      url地址
     * @param strParam 参数
     * @return String
     */
    public static String httpPostStr(String url, String strParam) {
        String str = &quot;&quot;;
        // post请求返回结果
        CloseableHttpClient httpClient = HttpClients.createDefault();
        JSONObject jsonResult = null;
        HttpPost httpPost = new HttpPost(url);
        httpPost.setConfig(requestConfig);
        try {
            if (null != strParam) {
                // 解决中文乱码问题
                StringEntity entity = new StringEntity(strParam, &quot;utf-8&quot;);
                entity.setContentEncoding(&quot;UTF-8&quot;);
                entity.setContentType(&quot;application/x-www-form-urlencoded&quot;);
                httpPost.setEntity(entity);
            }
            CloseableHttpResponse result = httpClient.execute(httpPost);
            // 请求发送成功，并得到响应
            if (result.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {

                try {
                    // 读取服务器返回过来的json字符串数据
                    str = EntityUtils.toString(result.getEntity(), &quot;utf-8&quot;);
                    // 把json字符串转换成json对象
                    /*jsonResult = JSONObject.parseObject(str);*/
                } catch (Exception e) {
                    logger.error(&quot;post请求提交失败:&quot; + url, e);
                }
            }
        } catch (IOException e) {
            logger.error(&quot;post请求提交失败:&quot; + url, e);
        } finally {
            httpPost.releaseConnection();
        }
        return str;
    }

}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589286418244.webp" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JAVA日期比较时间大小的几种方法]]></title>
        <id>https://flakkaqi.github.io/post/java-ri-qi-bi-jiao-shi-jian-da-xiao-de-ji-chong-fang-fa/</id>
        <link href="https://flakkaqi.github.io/post/java-ri-qi-bi-jiao-shi-jian-da-xiao-de-ji-chong-fang-fa/">
        </link>
        <updated>2020-05-09T03:26:44.000Z</updated>
        <summary type="html"><![CDATA[<p>😩随便写写</p>
]]></summary>
        <content type="html"><![CDATA[<p>😩随便写写</p>
<!-- more -->
<h3 id="思路一">思路一：</h3>
<p>将日期字符串转为整数进行比较</p>
<pre><code class="language-java">/**
     * @title: dateCompare
     * @description: 比较日期大小
     * @param date1 日期1
     * @param date2 日期2
     * @return
     */
    public static int dateCompare(Date date1, Date date2) {
        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);
        String dateFirst = dateFormat.format(date1);
        String dateLast = dateFormat.format(date2);
        int dateFirstIntVal = Integer.parseInt(dateFirst);
        int dateLastIntVal = Integer.parseInt(dateLast);
        if (dateFirstIntVal &gt; dateLastIntVal) {
            return 1;
        } else if (dateFirstIntVal &lt; dateLastIntVal) {
            return -1;
        }
        return 0;
    }

    ```
### 思路二：
将字符串装维date对象进行比较

``` java
SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
            Date begin = format.parse(&quot;2020-05-02 00:00:00&quot;);
            Date end = format.parse(&quot;2020-05-07 00:00:00&quot;);
            if (end.getTime() &lt; begin.getTime()) 
            //利用getTime()方法比较大小
            }
</code></pre>
<p>Date对象本身还有三种自带的比较大小的方法可以使用：</p>
<pre><code class="language-java">Date date = new Date(); //获取当前的系统时间。
            date.before();
            date.after();
            date.compareTo()
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589003518003.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[利用Redis生成数据库全局唯一性id]]></title>
        <id>https://flakkaqi.github.io/post/li-yong-redis-sheng-cheng-shu-ju-ku-quan-ju-wei-yi-xing-id/</id>
        <link href="https://flakkaqi.github.io/post/li-yong-redis-sheng-cheng-shu-ju-ku-quan-ju-wei-yi-xing-id/">
        </link>
        <updated>2020-04-29T03:17:46.000Z</updated>
        <summary type="html"><![CDATA[<p>🔊UUID本身满足分布式唯一的ID,只是长度太长，在很多场景中无法适用，尤其在生成单号的时候，一般单号都需要能看到日期，数量等订单信息。当然在分布式中还有其他生成方式，比如雪花算法等可自行百度。这里介绍利用redis生成全局唯一id的方法：实现环境是springboot</p>
]]></summary>
        <content type="html"><![CDATA[<p>🔊UUID本身满足分布式唯一的ID,只是长度太长，在很多场景中无法适用，尤其在生成单号的时候，一般单号都需要能看到日期，数量等订单信息。当然在分布式中还有其他生成方式，比如雪花算法等可自行百度。这里介绍利用redis生成全局唯一id的方法：实现环境是springboot</p>
<!-- more -->
<h2 id="1利用springboot整个redis">1.利用springboot整个redis</h2>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
 
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;demo&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
 
    &lt;name&gt;demo&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;
 
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.5.8.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
 
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;
 
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
 
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
 
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<h2 id="2application-redisyml文件">2.application-redis.yml文件</h2>
<pre><code class="language-yaml">spring:
  redis:
    database: 0
    host: 127.0.0.1
    port: 6379
    timeout: 0  # 连接超时时间（毫秒）
    jedis:
      pool:
          max-active: 20 # 连接池最大连接数（使用负值表示没有限制）
          max-idle: 20  # 连接池中的最大空闲连接
          max-wait: -1 # 连接池最大阻塞等待时间（使用负值表示没有限制）
          min-idle: 0 # 连接池中的最小空闲连接
</code></pre>
<h2 id="3redis-config-配置">3.redis config 配置</h2>
<!-- more -->
<!-- more -->
<pre><code class="language-java">package com.example.demo.config;
 
import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.annotation.PropertyAccessor;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.springframework.cache.CacheManager;
import org.springframework.cache.annotation.CachingConfigurerSupport;
import org.springframework.cache.interceptor.KeyGenerator;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.cache.RedisCacheManager;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;
 
import java.util.Arrays;
 
/**
 * @Title: redis配置类
 * @Package RedisConfig
 * redis配置类
 * @author syliu
 * @create 2017/9/29 0029
 */
@Configuration
public class RedisConfig {
 
 
    @Bean
    public RedisTemplate&lt;String, String&gt; redisTemplate(RedisConnectionFactory factory) {
        StringRedisTemplate template = new StringRedisTemplate(factory);
        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        jackson2JsonRedisSerializer.setObjectMapper(objectMapper);
        template.setValueSerializer(jackson2JsonRedisSerializer);
        template.afterPropertiesSet();
        return template;
    }
}
</code></pre>
<h2 id="4primarykeyservice">4..PrimaryKeyService</h2>
<pre><code class="language-java">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.stereotype.Service;
import java.util.Calendar;
import java.util.Date;

/**
 * 利用redis生成数据库全局唯一性id
 * * @Auther: QiShuai
 *
 * @Date: 2020/4/28 20:49
 */
@Service
public class PrimaryKeyService {

    @Autowired
    private RedisTemplate redisTemplate;

    /**
     * 获取年的后两位加上一年多少天+当前小时数作为前缀
     *
     * @param date
     * @return
     */
    public String getOrderIdPrefix(Date date) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        int year = calendar.get(Calendar.YEAR);
        int month = calendar.get(Calendar.MONTH);
        int day = calendar.get(Calendar.DAY_OF_MONTH);
        int hour = calendar.get(Calendar.HOUR_OF_DAY);
        //补两位,因为一年最多三位数
        String monthFormat = String.format(&quot;%1$02d&quot;, month + 1);
        //补两位，因为日最多两位数
        String dayFormat = String.format(&quot;%1$02d&quot;, day);
        //补两位，因为小时最多两位数
        String hourFormat = String.format(&quot;%1$02d&quot;, hour);
        StringBuilder uniqueId = new StringBuilder();
        return uniqueId.append(year).append(monthFormat).append(dayFormat).append(hourFormat).toString();
    }

    /**
     * 参数生成全局唯一ID
     *
     * @param prefix
     * @return
     */
    public String orderId(String prefix) {
        String key = new StringBuilder().append(&quot;DEMO:ORDER_ID_&quot;).append(prefix).toString();
        Long increment = redisTemplate.opsForValue().increment(key, 1);
        //往前补6位
        return new StringBuilder().append(prefix).append(String.format(&quot;%1$06d&quot;, increment)).toString();
    }

    /**
     * 直接生成全局唯一ID
     * @param date  时间
     * @return 全局唯一ID
     */
    public String createUniqueId(Date date) {

        String orderIdPrefix = getOrderIdPrefix(date);
        String registrationNo = orderId(orderIdPrefix);
        return registrationNo;
    }

}
</code></pre>
<h2 id="5测试类">5.测试类</h2>
<pre><code class="language-java">package com.example.demo;
 
import com.example.demo.service.PrimaryKeyService;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
 
import java.util.Date;
@RunWith(SpringRunner.class)
@SpringBootTest
public class DemoApplicationTests {
    @Autowired
    private PrimaryKeyService primaryKeyService;
 
    @Test
    public void contextLoads() {
        long startMillis = System.currentTimeMillis();
        String orderIdPrefix = primaryKeyService.getOrderIdPrefix(new Date());
        for (int i = 0; i &lt; 10; i++) {
            Long aLong = primaryKeyService.orderId(orderIdPrefix);
            System.out.println(aLong);
        }
        long endMillis = System.currentTimeMillis();
        System.out.println(&quot;生成速度:&quot;+(endMillis-startMillis)+&quot;,单位毫秒&quot;);
    }
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589003814324.webp" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[java如何将MultipartFile对象转为File对象]]></title>
        <id>https://flakkaqi.github.io/post/java-ru-he-jiang-multipartfile-dui-xiang-zhuan-wei-file-dui-xiang/</id>
        <link href="https://flakkaqi.github.io/post/java-ru-he-jiang-multipartfile-dui-xiang-zhuan-wei-file-dui-xiang/">
        </link>
        <updated>2020-04-26T11:17:49.000Z</updated>
        <summary type="html"><![CDATA[<p>🤸‍♂话不多说，直接上代码，就是干</p>
]]></summary>
        <content type="html"><![CDATA[<p>🤸‍♂话不多说，直接上代码，就是干</p>
<!-- more -->
<pre><code class="language-java">import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;

/**
 * @Auther: QiShuai
 * @Date: 2020/4/8 10:58
 * @Description:
 */
public class MultipartFileToFile {
    /**
     * MultipartFile 转 File
     *
     * @param file
     * @throws Exception
     */
    public static File multipartFileToFile(MultipartFile file) throws Exception {

        File toFile = null;
        if (file.equals(&quot;&quot;) || file.getSize() &lt;= 0) {
            file = null;
        } else {
            InputStream ins = null;
            ins = file.getInputStream();
            toFile = new File(file.getOriginalFilename());
            inputStreamToFile(ins, toFile);
            ins.close();
        }
        return toFile;
    }

    //获取流文件
    private static void inputStreamToFile(InputStream ins, File file) {
        try {
            OutputStream os = new FileOutputStream(file);
            int bytesRead = 0;
            byte[] buffer = new byte[8192];
            while ((bytesRead = ins.read(buffer, 0, 8192)) != -1) {
                os.write(buffer, 0, bytesRead);
            }
            os.close();
            ins.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * 删除本地临时文件
     * @param file
     */
    public static void deleteTempFile(File file) {
        if (file != null) {
            File del = new File(file.toURI());
            del.delete();
        }
    }
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589003908740.webp" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[java创建临时文件并写入数据]]></title>
        <id>https://flakkaqi.github.io/post/java-chuang-jian-lin-shi-wen-jian-bing-xie-ru-shu-ju/</id>
        <link href="https://flakkaqi.github.io/post/java-chuang-jian-lin-shi-wen-jian-bing-xie-ru-shu-ju/">
        </link>
        <updated>2020-04-26T11:07:15.000Z</updated>
        <summary type="html"><![CDATA[<p>🤣创建文件可不就是为了保存数据吗？</p>
]]></summary>
        <content type="html"><![CDATA[<p>🤣创建文件可不就是为了保存数据吗？</p>
<!-- more -->
<pre><code class="language-java">// 调用：
{
String file = &quot;xxxx.&quot;;  //base64编码的字符串
String fileName = &quot;xxxx.txt&quot;;
StringBuilder tr = new StringBuilder();
        String tempPath = tr.append(System.getProperty(&quot;java.io.tmpdir&quot;)).append(File.separator).append(fileName).toString();
        try {
            boolean flag = Base64Util.GenerateFile(file, tempPath);
            if (!flag) {
                return &quot;文件有误，请检查后重新上传！&quot;;
            } else {
                File tempFile = new File(tempPath);
                //使用File对象
&lt;!-- more --&gt;

            }
        } catch (Exception e) {
                e.printStackTrace();
        } finally {
            //删除临时文件
            File tempFile = new File(tempPath);
            if (tempFile.exists()) {
                tempFile.delete();
            }
        }
}
/**
     * 根据字节数组字符串进行Base64解码并生成文件
     *
     * @param fileStr BASE64编码后的字符串
     * @param savedFilePath 保存文件的路径和文件名
     * @return 转换状态
     */
    public static boolean GenerateFile(String fileStr, String savedFilePath) {
        // 文件字节数组字符串数据为空
        if (StringUtils.isBlank(fileStr))
            return false;
        BASE64Decoder decoder = new BASE64Decoder();
        try {
            // Base64解码
            byte[] b = decoder.decodeBuffer(fileStr);
            for (int i = 0; i &lt; b.length; ++i) {
                {// 调整异常数据
                    if (b[i] &lt; 0)
                        b[i] += 256;
                }
            }
            // 生成文件
            OutputStream out = new FileOutputStream(savedFilePath);
            out.write(b);
            out.flush();
            out.close();
            return true;
        } catch (Exception e) {
            return false;
       }
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589003927748.webp" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java 实现文件和base64字符串互转]]></title>
        <id>https://flakkaqi.github.io/post/java-shi-xian-wen-jian-he-base64-zi-fu-chuan-hu-zhuan/</id>
        <link href="https://flakkaqi.github.io/post/java-shi-xian-wen-jian-he-base64-zi-fu-chuan-hu-zhuan/">
        </link>
        <updated>2020-04-26T06:55:56.000Z</updated>
        <summary type="html"><![CDATA[<p>🤖有时候吧，前端给后台传的文件可能是经过BASE64转码后的字符串，到了后端我们需要对其进行解码。以下代码就是一个亲测有用的实现过程。那偶不谢.</p>
]]></summary>
        <content type="html"><![CDATA[<p>🤖有时候吧，前端给后台传的文件可能是经过BASE64转码后的字符串，到了后端我们需要对其进行解码。以下代码就是一个亲测有用的实现过程。那偶不谢.</p>
<!-- more -->
<p>😲具体代码如下：</p>
<pre><code class="language-java">package main.java.demo;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

/**
 * 适用大部分格式的文件
 *
 * @misterqi
 */
public class One {
    public static void main(String[] args) {
        One t = new One();
        String str = t.GetImageStr(&quot;C:/Users/QiShuai/Pictures/background/centerbg.jpg&quot;);
        System.out.println(str);
        boolean flag = t.GenerateImage(str, &quot;C:/Users/QiShuai/Pictures/background/centerbg2.jpg&quot;);
        System.out.println(flag);
    }

    /**
     * 将文件转化为字节数组字符串，并对其进行Base64编码处理
     *
     * @param imgFile
     * @return
     */
    public static String GetImageStr(String imgFile) {
        InputStream in = null;
        byte[] data = null;
        // 读取文件字节数组
        try {
            in = new FileInputStream(imgFile);
            data = new byte[in.available()];
            in.read(data);
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // 对字节数组Base64编码
        BASE64Encoder encoder = new BASE64Encoder();
        // 返回Base64编码过的字节数组字符串
        return encoder.encode(data);
    }

    /**
     * 根据字节数组字符串进行Base64解码并生成文件
     *
     * @param imgStr
     * @param savedImagePath
     * @return
     */
    public static boolean GenerateImage(String imgStr, String savedImagePath) {
        // 文件字节数组字符串数据为空
        if (imgStr == null)
            return false;
        BASE64Decoder decoder = new BASE64Decoder();
        try {
            // Base64解码
            byte[] b = decoder.decodeBuffer(imgStr);
            for (int i = 0; i &lt; b.length; ++i) {
                {// 调整异常数据
                    if (b[i] &lt; 0)
                        b[i] += 256;
                }
            }
            // 生成文件
            OutputStream out = new FileOutputStream(savedImagePath);
            out.write(b);
            out.flush();
            out.close();
            return true;
        } catch (Exception e) {
            return false;
        }
    }

}
</code></pre>
<p>🤤可以使用随便一个文件进行测试<br>
<img src="https://flakkaqi.github.io/post-images/1589004032405.webp" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[友情链接]]></title>
        <id>https://flakkaqi.github.io/post/you-qing-lian-jie/</id>
        <link href="https://flakkaqi.github.io/post/you-qing-lian-jie/">
        </link>
        <updated>2020-04-18T02:38:52.000Z</updated>
        <content type="html"><![CDATA[<p><a href="https://greasyfork.org/zh-CN/#home-step-1">脚本管理器安装</a><br>
<a href="">油猴脚本下载</a><br>
<a href="http://www.win4000.com/">高清壁纸下载</a><br>
<img src="https://flakkaqi.github.io/post-images/1589004052469.webp" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[有趣的博客网站~]]></title>
        <id>https://flakkaqi.github.io/post/you-qu-de-bo-ke-wang-zhan-~/</id>
        <link href="https://flakkaqi.github.io/post/you-qu-de-bo-ke-wang-zhan-~/">
        </link>
        <updated>2020-04-18T01:56:14.000Z</updated>
        <summary type="html"><![CDATA[<p>这里会有很多有趣的开源项目传送门👇</p>
]]></summary>
        <content type="html"><![CDATA[<p>这里会有很多有趣的开源项目传送门👇</p>
<!-- more -->
<h2 id="王者">🥇王者</h2>
<h2 id="白银">🥈白银</h2>
<p><strong>no1</strong>: <a href="http://mouto.org/">卜卜口</a></p>
<pre><code>前端开发、人像写真、二次元、有趣的开源项目、博客、多链接
</code></pre>
<h2 id="青铜">🥉青铜</h2>
<h2 id="屌丝">😹屌丝</h2>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589004080541.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[有趣的开源项目~]]></title>
        <id>https://flakkaqi.github.io/post/you-qu-de-kai-yuan-xiang-mu-~/</id>
        <link href="https://flakkaqi.github.io/post/you-qu-de-kai-yuan-xiang-mu-~/">
        </link>
        <updated>2020-04-18T01:54:36.000Z</updated>
        <summary type="html"><![CDATA[<p>这里会有很多有趣的开源项目传送门👇</p>
]]></summary>
        <content type="html"><![CDATA[<p>这里会有很多有趣的开源项目传送门👇</p>
<!-- more -->
<h2 id="王者">🥇王者</h2>
<h2 id="白银">🥈白银</h2>
<p><strong>no1</strong>: <a href="http://mouto.org/">卜卜口</a></p>
<pre><code>前端开发、人像写真、二次元、有趣的开源项目、博客、多链接
</code></pre>
<h2 id="青铜">🥉青铜</h2>
<h2 id="屌丝">😹屌丝</h2>
<p><strong>no1:</strong> <a href="https://lab.magiconch.com/nbnhhsh/">能不能好好说话</a></p>
<pre><code>
GitHub项目地址：https://github.com/itorr/nbnhhsh
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1589004101279.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[这是我老婆]]></title>
        <id>https://flakkaqi.github.io/post/zhe-shi-wo-lao-po/</id>
        <link href="https://flakkaqi.github.io/post/zhe-shi-wo-lao-po/">
        </link>
        <updated>2020-04-13T09:38:40.000Z</updated>
        <content type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1586771901375.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
</feed>