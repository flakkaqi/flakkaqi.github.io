<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://flakkaqi.github.io</id>
    <title>ç¥å…ˆç”Ÿçš„å¾®åšå®¢</title>
    <updated>2021-04-20T06:37:08.216Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://flakkaqi.github.io"/>
    <link rel="self" href="https://flakkaqi.github.io/atom.xml"/>
    <subtitle>You dida dida me , I huala hula you</subtitle>
    <logo>https://flakkaqi.github.io/images/avatar.png</logo>
    <icon>https://flakkaqi.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, ç¥å…ˆç”Ÿçš„å¾®åšå®¢</rights>
    <entry>
        <title type="html"><![CDATA[mavenå°†æœ¬åœ°jaråŒ…å®‰è£…åˆ°ä»“åº“]]></title>
        <id>https://flakkaqi.github.io/post/maven-jiang-ben-di-jar-bao-an-zhuang-dao-cang-ku/</id>
        <link href="https://flakkaqi.github.io/post/maven-jiang-ben-di-jar-bao-an-zhuang-dao-cang-ku/">
        </link>
        <updated>2020-11-18T02:16:31.000Z</updated>
        <content type="html"><![CDATA[<pre><code>mvn install:install-file -Dfile=aspose-words-16.8.0-jdk16.jar -DgroupId=com.aspose -DartifactId=aspose-words -Dversion=16.8.0 -Dpackaging=jar
</code></pre>
<p>mvn install:install-file -Dfile=pageoffice4.5.0.10.jar -DgroupId=com.zhuozhengsoft -DartifactId=pageoffice -Dversion=4.5.0.10 -Dpackaging=jar</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç¼“å­˜çš„ä¸‰å¤§é—®é¢˜]]></title>
        <id>https://flakkaqi.github.io/post/huan-cun-de-san-da-wen-ti/</id>
        <link href="https://flakkaqi.github.io/post/huan-cun-de-san-da-wen-ti/">
        </link>
        <updated>2020-10-27T06:20:13.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« ä¸»è¦è°ˆè°ˆRedisä¸­å¾ˆå®¹æ˜“å‡ºç°çš„ä¸‰å¤§é—®é¢˜ç°è±¡ï¼šç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ä»¥åŠç¼“å­˜é›ªå´©ã€‚ä¸è¿‡åœ¨ä»‹ç»è¿™ä¸‰ä¸ªé—®é¢˜ç°è±¡ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å…ˆæ¥äº†è§£ä¸‹Redisä¸­keyçš„è¿‡æœŸæ·˜æ±°æœºåˆ¶ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« ä¸»è¦è°ˆè°ˆRedisä¸­å¾ˆå®¹æ˜“å‡ºç°çš„ä¸‰å¤§é—®é¢˜ç°è±¡ï¼šç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ä»¥åŠç¼“å­˜é›ªå´©ã€‚ä¸è¿‡åœ¨ä»‹ç»è¿™ä¸‰ä¸ªé—®é¢˜ç°è±¡ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å…ˆæ¥äº†è§£ä¸‹Redisä¸­keyçš„è¿‡æœŸæ·˜æ±°æœºåˆ¶ã€‚</p>
<!-- more -->
<p>ğŸ˜ä¼—æ‰€å‘¨çŸ¥ï¼ŒRediså¯ä»¥å¯¹å­˜å‚¨åœ¨Redisä¸­çš„ç¼“å­˜æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ¯”å¦‚æˆ‘ä»¬è·å–çš„çŸ­ä¿¡éªŒè¯ç ä¸€èˆ¬ååˆ†é’Ÿè¿‡æœŸï¼Œæˆ‘ä»¬è¿™æ—¶å€™å°±éœ€è¦åœ¨éªŒè¯ç å­˜è¿›Redisæ—¶æ·»åŠ ä¸€ä¸ªkeyçš„è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ ¼å¤–æ³¨æ„çš„é—®é¢˜å°±æ˜¯ï¼šå¹¶ékeyè¿‡æœŸæ—¶é—´åˆ°äº†å°±ä¸€å®šä¼šè¢«Redisç»™åˆ é™¤ã€‚é‚£ä¹ˆRedisæ˜¯å¦‚ä½•åšåˆ°å¯¹è¿‡æœŸkeyè¿›è¡Œåˆ é™¤å‘¢ï¼ŸRedisä¸­å¯¹äºè¿‡æœŸkeyçš„åˆ é™¤åˆ†ä¸ºä¸¤ç§ç­–ç•¥ï¼šå®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤ã€‚</p>
<p><em>å®šæœŸåˆ é™¤</em>ï¼šRedis é»˜è®¤æ˜¯æ¯éš” 100ms å°±éšæœºæŠ½å–ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„ Keyï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤ã€‚ä¸ºä»€ä¹ˆæ˜¯éšæœºæŠ½å–è€Œä¸æ˜¯æ£€æŸ¥æ‰€æœ‰keyï¼Ÿå› ä¸ºä½ å¦‚æœè®¾ç½®çš„keyæˆåƒä¸Šä¸‡ï¼Œæ¯100æ¯«ç§’éƒ½å°†æ‰€æœ‰å­˜åœ¨çš„keyæ£€æŸ¥ä¸€éï¼Œä¼šç»™CPUå¸¦æ¥æ¯”è¾ƒå¤§çš„å‹åŠ›ã€‚</p>
<p><em>æƒ°æ€§åˆ é™¤</em> ï¼šå®šæœŸåˆ é™¤ç”±äºæ˜¯éšæœºæŠ½å–å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸ Key åˆ°äº†è¿‡æœŸæ—¶é—´å¹¶æ²¡æœ‰è¢«åˆ é™¤ã€‚æ‰€ä»¥ç”¨æˆ·åœ¨ä»ç¼“å­˜è·å–æ•°æ®çš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥è¿™ä¸ªkeyæ˜¯å¦è¿‡æœŸäº†ï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤è¿™ä¸ªkeyã€‚è¿™æ—¶å€™å°±ä¼šåœ¨æŸ¥è¯¢çš„æ—¶å€™å°†è¿‡æœŸkeyä»ç¼“å­˜ä¸­æ¸…é™¤ã€‚<br>
ğŸ˜™ä½†æ˜¯å¦‚æœä»…ä»…ä½¿ç”¨å®šæœŸåˆ é™¤ + æƒ°æ€§åˆ é™¤æœºåˆ¶è¿˜æ˜¯ä¼šç•™ä¸‹ä¸€ä¸ªä¸¥é‡çš„éšæ‚£ï¼šå¦‚æœå®šæœŸåˆ é™¤ç•™ä¸‹äº†å¾ˆå¤šå·²ç»è¿‡æœŸçš„keyï¼Œè€Œä¸”ç”¨æˆ·é•¿æ—¶é—´éƒ½æ²¡æœ‰ä½¿ç”¨è¿‡è¿™äº›è¿‡æœŸkeyï¼Œå¯¼è‡´è¿‡æœŸkeyæ— æ³•è¢«æƒ°æ€§åˆ é™¤ï¼Œä»è€Œå¯¼è‡´è¿‡æœŸkeyä¸€ç›´å †ç§¯åœ¨å†…å­˜é‡Œï¼Œæœ€ç»ˆé€ æˆRediså†…å­˜å—è¢«æ¶ˆè€—æ®†å°½ã€‚é‚£è¿™ä¸ªé—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™Rediså†…å­˜æ·˜æ±°æœºåˆ¶åº”è¿è€Œç”Ÿäº†ã€‚Rediså†…å­˜æ·˜æ±°æœºåˆ¶æä¾›äº†6ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</p>
<ul>
<li>volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ã€‚</li>
<li>volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°ã€‚</li>
<li>volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ã€‚</li>
<li>allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚</li>
<li>allkeys-randomï¼šä»æ•°æ®é›†ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ã€‚</li>
<li>no-envictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™</li>
</ul>
<p>ğŸ˜ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨volatile-lruç­–ç•¥ï¼Œå¯¹äºé…ç½®ä¿¡æ¯ç­‰é‡è¦æ•°æ®ï¼Œä¸åº”è¯¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·Rediså°±æ°¸è¿œä¸ä¼šæ·˜æ±°è¿™äº›é‡è¦æ•°æ®ã€‚å¯¹äºä¸€èˆ¬æ•°æ®å¯ä»¥æ·»åŠ ä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œå½“æ•°æ®å¤±æ•ˆåˆ™è¯·æ±‚ä¼šä»DBä¸­è·å–å¹¶é‡æ–°å­˜å…¥Redisä¸­ã€‚</p>
<p>###ç¼“å­˜å‡»ç©¿</p>
<p>è®²å®Œäº†Redisçš„keyçš„è¿‡æœŸæ·˜æ±°æœºåˆ¶ï¼Œæ¥ä¸‹æˆ‘ä»¬å¯ä»¥è¿›å…¥æ­£é¢˜ï¼šä¸ºä»€ä¹ˆä¼šå‡ºç°ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©ç°è±¡å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹è¯·æ±‚æ˜¯å¦‚ä½•å–åˆ°æ•°æ®çš„ï¼šå½“æ¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œé¦–å…ˆå…ˆå°è¯•ä»Redisç¼“å­˜ä¸­è·å–åˆ°æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­èƒ½å–åˆ°æ•°æ®åˆ™ç›´æ¥è¿”å›ç»“æœï¼Œå½“ç¼“å­˜ä¸­ä¸å­˜åœ¨æ•°æ®æ—¶ä»DBè·å–æ•°æ®ï¼Œå¦‚æœæ•°æ®åº“æˆåŠŸå–åˆ°æ•°æ®ï¼Œåˆ™æ›´æ–°Redisï¼Œç„¶åè¿”å›æ•°æ®ï¼Œå¦‚æœDBæ— æ•°æ®ï¼Œåˆ™è¿”å›ç©ºç»“æœã€‚é‚£ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°ä¸‰å¤§é—®é¢˜ç°è±¡å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç¼“å­˜å‡»ç©¿çš„æƒ…å†µï¼š</p>
<ul>
<li>å®šä¹‰ï¼šé«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªçƒ­é—¨keyçªç„¶è¿‡æœŸï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚åœ¨Redisæœªæ‰¾åˆ°ç¼“å­˜æ•°æ®ï¼Œè¿›è€Œå…¨éƒ¨å»è®¿é—®DBè¯·æ±‚æ•°æ®ï¼Œå¼•èµ·DBå‹åŠ›ç¬é—´å¢å¤§ã€‚</li>
<li>è§£å†³æ–¹æ¡ˆï¼šç¼“å­˜å‡»ç©¿çš„æƒ…å†µä¸‹ä¸€èˆ¬ä¸å®¹æ˜“é€ æˆDBçš„å®•æœºï¼Œåªæ˜¯ä¼šé€ æˆå¯¹DBçš„å‘¨æœŸæ€§å‹åŠ›ã€‚å¯¹ç¼“å­˜å‡»ç©¿çš„è§£å†³æ–¹æ¡ˆä¸€èˆ¬å¯ä»¥è¿™æ ·ï¼šRedisä¸­çš„æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç„¶ååœ¨ç¼“å­˜çš„å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§æ ‡è¯†è¿‡æœŸæ—¶é—´ï¼Œæ¯æ¬¡è·å–åˆ°æ•°æ®æ—¶ï¼Œæ ¡éªŒå¯¹è±¡ä¸­çš„è¿‡æœŸæ—¶é—´å±æ€§ï¼Œå¦‚æœæ•°æ®å³å°†è¿‡æœŸï¼Œåˆ™å¼‚æ­¥å‘èµ·ä¸€ä¸ªçº¿ç¨‹ä¸»åŠ¨æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®ã€‚ä½†æ˜¯è¿™ç§æ–¹æ¡ˆå¯èƒ½ä¼šå¯¼è‡´æœ‰äº›è¯·æ±‚ä¼šæ‹¿åˆ°è¿‡æœŸçš„å€¼ï¼Œå°±å¾—çœ‹ä¸šåŠ¡èƒ½å¦å¯ä»¥æ¥å—ï¼Œå¦‚æœè¦æ±‚æ•°æ®å¿…é¡»æ˜¯æ–°æ•°æ®ï¼Œåˆ™æœ€å¥½çš„æ–¹æ¡ˆåˆ™ä¸ºçƒ­ç‚¹æ•°æ®è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸï¼Œç„¶ååŠ ä¸€ä¸ªäº’æ–¥é”ä¿è¯ç¼“å­˜çš„å•çº¿ç¨‹å†™ã€‚</li>
</ul>
<p>###ç¼“å­˜ç©¿é€</p>
<ul>
<li>å®šä¹‰ï¼šç¼“å­˜ç©¿é€æ˜¯æŒ‡æŸ¥è¯¢ç¼“å­˜å’ŒDBä¸­éƒ½ä¸å­˜åœ¨çš„æ•°æ®ã€‚æ¯”å¦‚é€šè¿‡idæŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œidä¸€èˆ¬å¤§äº0ï¼Œæ”»å‡»è€…ä¼šæ•…æ„ä¼ idä¸º-1å»æŸ¥è¯¢ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­åˆ™ä»DBä¸­è·å–æ•°æ®ï¼Œè¿™å°†ä¼šå¯¼è‡´æ¯æ¬¡ç¼“å­˜éƒ½ä¸å‘½ä¸­æ•°æ®å¯¼è‡´æ¯ä¸ªè¯·æ±‚éƒ½è®¿é—®DBï¼Œé€ æˆç¼“å­˜ç©¿é€ã€‚</li>
<li>è§£å†³æ–¹æ¡ˆï¼šç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆå¯ä»¥åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šé¦–å…ˆåœ¨APIå±‚å¢åŠ åŸºæœ¬æ ¡éªŒï¼šç”¨æˆ·é‰´æƒæ ¡éªŒï¼Œidæ ¡éªŒã€‚æ¯”å¦‚ç”¨æˆ·é‰´æƒå¤±è´¥æˆ–è€…id &lt; 0çš„è¯·æ±‚ç›´æ¥è¿›è¡Œæ‹¦æˆªã€‚å…¶æ¬¡åœ¨ç¼“å­˜å’ŒDBéƒ½å–ä¸åˆ°æ•°æ®çš„æ—¶å€™å°†å°†key-valueå­˜å‚¨æˆkey-nullå­˜å‚¨åˆ°Redisï¼Œ è¿‡æœŸæ—¶é—´å¯ä»¥å­˜å‚¨çš„çŸ­ç‚¹æ¯”å¦‚60Sï¼Œé˜²æ­¢çŸ­æ—¶é—´å†…æ”»å‡»è€…ä¸æ–­å‘èµ·è¯·æ±‚å¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§å‡ºç°å®•æœºã€‚</li>
</ul>
<p>###ç¼“å­˜é›ªå´©</p>
<ul>
<li>å®šä¹‰ï¼šç¼“å­˜ä¸­å¦‚æœå¤§é‡ç¼“å­˜åœ¨ä¸€æ®µæ—¶é—´å†…é›†ä¸­è¿‡æœŸäº†ï¼Œè¿™æ—¶å€™ä¼šå‘ç”Ÿå¤§é‡çš„ç¼“å­˜å‡»ç©¿ç°è±¡ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½è½åœ¨äº†DBä¸Šï¼Œç”±äºæŸ¥è¯¢æ•°æ®é‡å·¨å¤§ï¼Œå¼•èµ·DBå‹åŠ›è¿‡å¤§ç”šè‡³å¯¼è‡´DBå®•æœºã€‚</li>
<li>è§£å†³æ–¹æ¡ˆï¼šç¼“å­˜é›ªå´©ä¸€èˆ¬æ²¡æœ‰å®Œç¾è§£å†³çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°½é‡åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œå°½é‡ä¿è¯keyçš„å¤±æ•ˆæ—¶é—´æ¯”è¾ƒå¹³å‡ï¼Œé˜²æ­¢åŒä¸€æ—¶é—´å‡ºç°å¤§é‡ç¼“å­˜æ•°æ®åŒæ—¶è¿‡æœŸçš„ç°è±¡ï¼Œå¹¶ä¸”è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸã€‚åŒæ—¶å¦‚æœä¸ºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”æ¥ä¿è¯ç¼“å­˜çš„å•çº¿ç¨‹å†™ï¼Œè¿™æ ·å¯ä»¥é¿å…åŒä¸€æ—¶é—´å¤§é‡ç¼“å­˜å¤±æ•ˆå¯¼è‡´è¯·æ±‚å…¨éƒ¨è½åœ¨DBä¸Šã€‚è€Œæˆ‘è§‰å¾—å¦‚æœå¯ä»¥æ¥å—æœ‰äº›è¯·æ±‚æ‹¿åˆ°è¿‡æœŸå€¼ï¼Œæœ€åˆç†çš„æ–¹æ¡ˆå®é™…ä¸Šå°±æ˜¯ä½¿ç”¨ç¼“å­˜å‡»ç©¿çš„æ–¹æ¡ˆï¼šRedisä¸­çš„æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç„¶ååœ¨ç¼“å­˜çš„å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§æ ‡è¯†è¿‡æœŸæ—¶é—´ï¼Œæ¯æ¬¡è·å–åˆ°æ•°æ®æ—¶ï¼Œæ ¡éªŒå¯¹è±¡ä¸­çš„è¿‡æœŸæ—¶é—´å±æ€§ï¼Œå¦‚æœæ•°æ®å³å°†è¿‡æœŸï¼Œåˆ™å¼‚æ­¥å‘èµ·ä¸€ä¸ªçº¿ç¨‹ä¸»åŠ¨æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Springbootè§£å†³è·¨åŸŸé—®é¢˜]]></title>
        <id>https://flakkaqi.github.io/post/springboot-jie-jue-kua-yu-wen-ti/</id>
        <link href="https://flakkaqi.github.io/post/springboot-jie-jue-kua-yu-wen-ti/">
        </link>
        <updated>2020-09-27T01:47:28.000Z</updated>
        <content type="html"><![CDATA[<!-- more -->
<p>ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜è¿™é‡Œæˆ‘å°±ä¸è¯´äº†ï¼Œç›´æ¥è¯´æˆ‘ä½¿ç”¨addCorsMappingsæ–¹æ³•é…ç½®è·¨åŸŸæ—¶é‡åˆ°çš„é—®é¢˜ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">public void addCorsMappings(CorsRegistry registry) {
   
    registry.addMapping(&quot;/**&quot;)
            .allowedOrigins(&quot;*&quot;)
            .allowedMethods(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;, &quot;DELETE&quot;)
            .allowCredentials(true)
            .allowedHeaders(&quot;*&quot;)
            .maxAge(3600);
}
</code></pre>
<p>ä½†æ˜¯ä½¿ç”¨æ­¤æ–¹æ³•é…ç½®ä¹‹åå†ä½¿ç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨æ—¶è·¨åŸŸç›¸å…³é…ç½®å°±ä¼šå¤±æ•ˆã€‚<br>
åŸå› æ˜¯è¯·æ±‚ç»è¿‡çš„å…ˆåé¡ºåºé—®é¢˜ï¼Œå½“è¯·æ±‚åˆ°æ¥æ—¶ä¼šå…ˆè¿›å…¥æ‹¦æˆªå™¨ä¸­ï¼Œè€Œä¸æ˜¯è¿›å…¥Mappingæ˜ å°„ä¸­ï¼Œæ‰€ä»¥è¿”å›çš„å¤´ä¿¡æ¯ä¸­å¹¶æ²¡æœ‰é…ç½®çš„è·¨åŸŸä¿¡æ¯ã€‚æµè§ˆå™¨å°±ä¼šæŠ¥è·¨åŸŸå¼‚å¸¸ã€‚</p>
<p>æ­£ç¡®çš„è§£å†³è·¨åŸŸé—®é¢˜çš„æ–¹æ³•æ—¶ä½¿ç”¨CorsFilterè¿‡æ»¤å™¨ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">private CorsConfiguration corsConfig() {
    CorsConfiguration corsConfiguration = new CorsConfiguration();
    * è¯·æ±‚å¸¸ç”¨çš„ä¸‰ç§é…ç½®ï¼Œ*ä»£è¡¨å…è®¸æ‰€æœ‰ï¼Œå½“æ—¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±æ€§ï¼ˆæ¯”å¦‚headeråªèƒ½å¸¦ä»€ä¹ˆï¼Œåªèƒ½æ˜¯postæ–¹å¼ç­‰ç­‰ï¼‰
    */
    corsConfiguration.addAllowedOrigin(&quot;*&quot;);
    corsConfiguration.addAllowedHeader(&quot;*&quot;);
    corsConfiguration.addAllowedMethod(&quot;*&quot;);
    corsConfiguration.setAllowCredentials(true);
    corsConfiguration.setMaxAge(3600L);
    return corsConfiguration;
}
@Bean
public CorsFilter corsFilter() {
    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
    source.registerCorsConfiguration(&quot;/**&quot;, corsConfig());
    return new CorsFilter(source);
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Springbootå¦‚ä½•é…ç½®RedisTemplate]]></title>
        <id>https://flakkaqi.github.io/post/springboot-ru-he-pei-zhi-redistemplate/</id>
        <link href="https://flakkaqi.github.io/post/springboot-ru-he-pei-zhi-redistemplate/">
        </link>
        <updated>2020-08-13T09:08:29.000Z</updated>
        <content type="html"><![CDATA[<!-- more -->
<h2 id="ä¸€-å¼•å…¥ä¾èµ–">ä¸€ã€å¼•å…¥ä¾èµ–</h2>
<pre><code class="language-xml">&lt;!--redis--&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
		&lt;/dependency&gt;
		&lt;!--fastjson--&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;com.alibaba&lt;/groupId&gt;
			&lt;artifactId&gt;fastjson&lt;/artifactId&gt;
			&lt;version&gt;1.2.47&lt;/version&gt;
		&lt;/dependency&gt;
</code></pre>
<h2 id="äºŒ-æ–°å»ºé…ç½®ç±»">äºŒã€æ–°å»ºé…ç½®ç±»</h2>
<pre><code class="language-java">
import com.alibaba.fastjson.support.spring.FastJsonRedisSerializer;
import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.boot.autoconfigure.data.redis.RedisProperties;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisOperations;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.serializer.StringRedisSerializer;

@Configuration
@ConditionalOnClass(RedisOperations.class)
@EnableConfigurationProperties(RedisProperties.class)
public class RedisConfig {

    @Bean
    @ConditionalOnMissingBean(name = &quot;redisTemplate&quot;)
    public RedisTemplate&lt;Object, Object&gt; redisTemplate(
            RedisConnectionFactory redisConnectionFactory) {
        RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate&lt;&gt;();
        //ä½¿ç”¨fastjsonåºåˆ—åŒ–
        FastJsonRedisSerializer fastJsonRedisSerializer = new FastJsonRedisSerializer(Object.class);
        // valueå€¼çš„åºåˆ—åŒ–é‡‡ç”¨fastJsonRedisSerializer
        template.setValueSerializer(fastJsonRedisSerializer);
        template.setHashValueSerializer(fastJsonRedisSerializer);
        // keyçš„åºåˆ—åŒ–é‡‡ç”¨StringRedisSerializer
        template.setKeySerializer(new StringRedisSerializer());
        template.setHashKeySerializer(new StringRedisSerializer());
        template.setConnectionFactory(redisConnectionFactory);
        return template;
    }

    @Bean
    @ConditionalOnMissingBean(StringRedisTemplate.class)
    public StringRedisTemplate stringRedisTemplate(
            RedisConnectionFactory redisConnectionFactory) {
        StringRedisTemplate template = new StringRedisTemplate();
        template.setConnectionFactory(redisConnectionFactory);
        return template;
    }
}
</code></pre>
<h2 id="ä¸‰-æ·»åŠ redisé…ç½®æ–‡ä»¶">ä¸‰ã€æ·»åŠ redisé…ç½®æ–‡ä»¶</h2>
<pre><code class="language-yml">spring:
  # Redisæ•°æ®æº
  redis:
    #databaseä¸ºé»˜è®¤redisåˆ›å»ºçš„0-15ä¸ªdbæ•°æ®åº“ï¼Œè¿™é‡Œé»˜è®¤ä¸º0ï¼Œåªç”¨å¡«å†™æ•°å­—
    host: localhost
    port: 6379
    timeout: 500
    password: 123456
    jedis:
      pool:
        max-active: 5  # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰
        max-wait: -1      # è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰
        max-idle: 20      # è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥
        min-idle: 1       # è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥
</code></pre>
<h2 id="å››-æ‰©å±•å·¥å…·ç±»">å››ã€æ‰©å±•å·¥å…·ç±»</h2>
<pre><code class="language-java">package com.css.zjjg.common.utils;

import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.stereotype.Component;
import org.springframework.util.CollectionUtils;

import javax.annotation.Resource;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.TimeUnit;

/**
 * @author QiShuai
 * @date 2020/8/13 13:53
 * @description rediså·¥å…·ç±»
 */
@Component
public final class RedisUtil {

    @Resource
    private RedisTemplate&lt;String, Object&gt; redisTemplate;

    public Set&lt;String&gt; keys(String keys) {
        try {
            return redisTemplate.keys(keys);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´
     *
     * @param key  é”®
     * @param time æ—¶é—´(ç§’)
     * @return
     */
    public boolean expire(String key, long time) {
        try {
            if (time &gt; 0) {
                redisTemplate.expire(key, time, TimeUnit.SECONDS);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * æ ¹æ®key è·å–è¿‡æœŸæ—¶é—´
     *
     * @param key é”® ä¸èƒ½ä¸ºnull
     * @return æ—¶é—´(ç§’) è¿”å›0ä»£è¡¨ä¸ºæ°¸ä¹…æœ‰æ•ˆ
     */
    public long getExpire(String key) {
        return redisTemplate.getExpire(key, TimeUnit.SECONDS);
    }

    /**
     * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨
     *
     * @param key é”®
     * @return true å­˜åœ¨ falseä¸å­˜åœ¨
     */
    public boolean hasKey(String key) {
        try {
            return redisTemplate.hasKey(key);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * åˆ é™¤ç¼“å­˜
     *
     * @param key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void del(String... key) {
        if (key != null &amp;&amp; key.length &gt; 0) {
            if (key.length == 1) {
                redisTemplate.delete(key[0]);
            } else {
                redisTemplate.delete(CollectionUtils.arrayToList(key));
            }
        }
    }

    /**
     * æ™®é€šç¼“å­˜è·å–
     *
     * @param key é”®
     * @return å€¼
     */
    public Object get(String key) {
        return key == null ? null : redisTemplate.opsForValue().get(key);
    }

    /**
     * æ™®é€šç¼“å­˜æ”¾å…¥
     *
     * @param key   é”®
     * @param value å€¼
     * @return trueæˆåŠŸ falseå¤±è´¥
     */
    public boolean set(String key, Object value) {
        try {
            redisTemplate.opsForValue().set(key, value);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´
     *
     * @param key   é”®
     * @param value å€¼
     * @param time  æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ
     * @return trueæˆåŠŸ false å¤±è´¥
     */
    public boolean set(String key, Object value, long time) {
        try {
            if (time &gt; 0) {
                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);
            } else {
                set(key, value);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * é€’å¢
     *
     * @param key   é”®
     * @param delta è¦å¢åŠ å‡ (å¤§äº0)
     * @return
     */
    public long incr(String key, long delta) {
        if (delta &lt; 0) {
            throw new RuntimeException(&quot;é€’å¢å› å­å¿…é¡»å¤§äº0&quot;);
        }
        return redisTemplate.opsForValue().increment(key, delta);
    }

    /**
     * é€’å‡
     *
     * @param key   é”®
     * @param delta è¦å‡å°‘å‡ (å°äº0)
     * @return
     */
    public long decr(String key, long delta) {
        if (delta &lt; 0) {
            throw new RuntimeException(&quot;é€’å‡å› å­å¿…é¡»å¤§äº0&quot;);
        }
        return redisTemplate.opsForValue().increment(key, -delta);
    }

    /**
     * HashGet
     *
     * @param key  é”® ä¸èƒ½ä¸ºnull
     * @param item é¡¹ ä¸èƒ½ä¸ºnull
     * @return å€¼
     */
    public Object hget(String key, String item) {
        return redisTemplate.opsForHash().get(key, item);
    }

    /**
     * è·å–hashKeyå¯¹åº”çš„æ‰€æœ‰é”®å€¼
     *
     * @param key é”®
     * @return å¯¹åº”çš„å¤šä¸ªé”®å€¼
     */
    public Map&lt;Object, Object&gt; hmget(String key) {
        return redisTemplate.opsForHash().entries(key);
    }

    /**
     * HashSet
     *
     * @param key é”®
     * @param map å¯¹åº”å¤šä¸ªé”®å€¼
     * @return true æˆåŠŸ false å¤±è´¥
     */
    public boolean hmset(String key, Map&lt;String, Object&gt; map) {
        try {
            redisTemplate.opsForHash().putAll(key, map);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * HashSet å¹¶è®¾ç½®æ—¶é—´
     *
     * @param key  é”®
     * @param map  å¯¹åº”å¤šä¸ªé”®å€¼
     * @param time æ—¶é—´(ç§’)
     * @return trueæˆåŠŸ falseå¤±è´¥
     */
    public boolean hmset(String key, Map&lt;String, Object&gt; map, long time) {
        try {
            redisTemplate.opsForHash().putAll(key, map);
            if (time &gt; 0) {
                expire(key, time);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º
     *
     * @param key   é”®
     * @param item  é¡¹
     * @param value å€¼
     * @return true æˆåŠŸ falseå¤±è´¥
     */
    public boolean hset(String key, String item, Object value) {
        try {
            redisTemplate.opsForHash().put(key, item, value);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º
     *
     * @param key   é”®
     * @param item  é¡¹
     * @param value å€¼
     * @param time  æ—¶é—´(ç§’) æ³¨æ„:å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´
     * @return true æˆåŠŸ falseå¤±è´¥
     */
    public boolean hset(String key, String item, Object value, long time) {
        try {
            redisTemplate.opsForHash().put(key, item, value);
            if (time &gt; 0) {
                expire(key, time);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * åˆ é™¤hashè¡¨ä¸­çš„å€¼
     *
     * @param key  é”® ä¸èƒ½ä¸ºnull
     * @param item é¡¹ å¯ä»¥ä½¿å¤šä¸ª ä¸èƒ½ä¸ºnull
     */
    public void hdel(String key, Object... item) {
        redisTemplate.opsForHash().delete(key, item);
    }

    /**
     * åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰è¯¥é¡¹çš„å€¼
     *
     * @param key  é”® ä¸èƒ½ä¸ºnull
     * @param item é¡¹ ä¸èƒ½ä¸ºnull
     * @return true å­˜åœ¨ falseä¸å­˜åœ¨
     */
    public boolean hHasKey(String key, String item) {
        return redisTemplate.opsForHash().hasKey(key, item);
    }

    /**
     * hashé€’å¢ å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª å¹¶æŠŠæ–°å¢åçš„å€¼è¿”å›
     *
     * @param key  é”®
     * @param item é¡¹
     * @param by   è¦å¢åŠ å‡ (å¤§äº0)
     * @return
     */
    public double hincr(String key, String item, double by) {
        return redisTemplate.opsForHash().increment(key, item, by);
    }

    /**
     * hashé€’å‡
     *
     * @param key  é”®
     * @param item é¡¹
     * @param by   è¦å‡å°‘è®°(å°äº0)
     * @return
     */
    public double hdecr(String key, String item, double by) {
        return redisTemplate.opsForHash().increment(key, item, -by);
    }

    /**
     * æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼
     *
     * @param key é”®
     * @return
     */
    public Set&lt;Object&gt; sGet(String key) {
        try {
            return redisTemplate.opsForSet().members(key);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * æ ¹æ®valueä»ä¸€ä¸ªsetä¸­æŸ¥è¯¢,æ˜¯å¦å­˜åœ¨
     *
     * @param key   é”®
     * @param value å€¼
     * @return true å­˜åœ¨ falseä¸å­˜åœ¨
     */
    public boolean sHasKey(String key, Object value) {
        try {
            return redisTemplate.opsForSet().isMember(key, value);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * å°†æ•°æ®æ”¾å…¥setç¼“å­˜
     *
     * @param key    é”®
     * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª
     * @return æˆåŠŸä¸ªæ•°
     */
    public long sSet(String key, Object... values) {
        try {
            return redisTemplate.opsForSet().add(key, values);
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }

    /**
     * å°†setæ•°æ®æ”¾å…¥ç¼“å­˜
     *
     * @param key    é”®
     * @param time   æ—¶é—´(ç§’)
     * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª
     * @return æˆåŠŸä¸ªæ•°
     */
    public long sSetAndTime(String key, long time, Object... values) {
        try {
            Long count = redisTemplate.opsForSet().add(key, values);
            if (time &gt; 0) {
                expire(key, time);
            }
            return count;
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }

    /**
     * è·å–setç¼“å­˜çš„é•¿åº¦
     *
     * @param key é”®
     * @return
     */
    public long sGetSetSize(String key) {
        try {
            return redisTemplate.opsForSet().size(key);
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }

    /**
     * ç§»é™¤å€¼ä¸ºvalueçš„
     *
     * @param key    é”®
     * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª
     * @return ç§»é™¤çš„ä¸ªæ•°
     */
    public long setRemove(String key, Object... values) {
        try {
            Long count = redisTemplate.opsForSet().remove(key, values);
            return count;
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }
    // ===============================list=================================

    /**
     * è·å–listç¼“å­˜çš„å†…å®¹
     *
     * @param key   é”®
     * @param start å¼€å§‹
     * @param end   ç»“æŸ 0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼
     * @return
     */
    public List&lt;Object&gt; lGet(String key, long start, long end) {
        try {
            return redisTemplate.opsForList().range(key, start, end);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * è·å–listç¼“å­˜çš„é•¿åº¦
     *
     * @param key é”®
     * @return
     */
    public long lGetListSize(String key) {
        try {
            return redisTemplate.opsForList().size(key);
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }

    /**
     * é€šè¿‡ç´¢å¼• è·å–listä¸­çš„å€¼
     *
     * @param key   é”®
     * @param index ç´¢å¼• index&gt;=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨
     * @return
     */
    public Object lGetIndex(String key, long index) {
        try {
            return redisTemplate.opsForList().index(key, index);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * å°†listæ”¾å…¥ç¼“å­˜
     *
     * @param key   é”®
     * @param value å€¼
     * @return
     */
    public boolean lSet(String key, Object value) {
        try {
            redisTemplate.opsForList().rightPush(key, value);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * å°†listæ”¾å…¥ç¼“å­˜
     *
     * @param key   é”®
     * @param value å€¼
     * @param time  æ—¶é—´(ç§’)
     * @return
     */
    public boolean lSet(String key, Object value, long time) {
        try {
            redisTemplate.opsForList().rightPush(key, value);
            if (time &gt; 0) {
                expire(key, time);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * å°†listæ”¾å…¥ç¼“å­˜
     *
     * @param key   é”®
     * @param value å€¼
     * @return
     */
    public boolean lSet(String key, List&lt;Object&gt; value) {
        try {
            redisTemplate.opsForList().rightPushAll(key, value);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * å°†listæ”¾å…¥ç¼“å­˜
     *
     * @param key   é”®
     * @param value å€¼
     * @param time  æ—¶é—´(ç§’)
     * @return
     */
    public boolean lSet(String key, List&lt;Object&gt; value, long time) {
        try {
            redisTemplate.opsForList().rightPushAll(key, value);
            if (time &gt; 0) {
                expire(key, time);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * æ ¹æ®ç´¢å¼•ä¿®æ”¹listä¸­çš„æŸæ¡æ•°æ®
     *
     * @param key   é”®
     * @param index ç´¢å¼•
     * @param value å€¼
     * @return
     */
    public boolean lUpdateIndex(String key, long index, Object value) {
        try {
            redisTemplate.opsForList().set(key, index, value);
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * ç§»é™¤Nä¸ªå€¼ä¸ºvalue
     *
     * @param key   é”®
     * @param count ç§»é™¤å¤šå°‘ä¸ª
     * @param value å€¼
     * @return ç§»é™¤çš„ä¸ªæ•°
     */
    public long lRemove(String key, long count, Object value) {
        try {
            Long remove = redisTemplate.opsForList().remove(key, count, value);
            return remove;
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }

    /**
     * æ ¹æ®keyå‰ç¼€æ‰¹é‡åˆ é™¤ç¼“å­˜
     * @param key
     * @return
     */
    public long batchDel(String key){
        try {
            Set&lt;String&gt; keys = redisTemplate.keys(key + &quot;*&quot;);
            Long delete = redisTemplate.delete(keys);
            return delete;

        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
    }
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1597310054821.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[javaä¸­å †æ ˆçš„åŒºåˆ«]]></title>
        <id>https://flakkaqi.github.io/post/java-zhong-dui-zhan-de-qu-bie/</id>
        <link href="https://flakkaqi.github.io/post/java-zhong-dui-zhan-de-qu-bie/">
        </link>
        <updated>2020-06-25T01:59:13.000Z</updated>
        <summary type="html"><![CDATA[<p>zzzd</p>
]]></summary>
        <content type="html"><![CDATA[<p>zzzd</p>
<!-- more -->
<h3 id="ä¸€-æ’‡å¼€é™æ€å­˜å‚¨åˆ†é…é›†ä¸­æ¯”è¾ƒå †å’Œæ ˆ">ä¸€ã€æ’‡å¼€é™æ€å­˜å‚¨åˆ†é…,é›†ä¸­æ¯”è¾ƒå †å’Œæ ˆ</h3>
<p>åŠŸèƒ½å’Œä½œç”¨</p>
<pre><code>å †ï¼šä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾å¯¹è±¡çš„
        ç¼ºç‚¹ï¼šç¨‹åºè¿è¡Œæ—¶è¯·æ±‚æ“ä½œç³»ç»Ÿç»™ä»–åˆ†é…å†…å­˜ï¼Œæ¯”å¦‚å¤šæ€ï¼Œç³»ç»Ÿåˆ†é…å’Œé”€æ¯å†…å­˜æ—¶å ç”¨æ—¶é—´é•¿ï¼Œæ•ˆç‡ä½ã€‚
        ä¼˜ç‚¹ï¼šç¼–è¯‘å™¨ä¸å¿…çŸ¥é“è¦ä»å †é‡Œåˆ†é…å¤šå°‘ç©ºé—´ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“è¦åœ¨å †é‡Œåœç•™å¤šä¹…ï¼Œ
æ ˆï¼šä¸»è¦æ˜¯ç”¨æ¥æ‰§è¡Œç¨‹åºçš„
        ä¼˜ç‚¹ï¼šä¿å­˜å¯¹è±¡çš„å¼•ç”¨å’ŒåŸºæœ¬æ•°æ®ç±»å‹ã€å±€éƒ¨å˜é‡ã€å½¢å¼å‚æ•°ç­‰åœ¨æ ˆä¸­åˆ†é…å†…å­˜ï¼Œç¼–è¯‘æ—¶æ•°æ®åŒºçš„å¤§å°å·²ç»ç¡®å®šï¼Œè¿è¡Œæ—¶åˆ†é…ï¼Œå¤§å°ä¸å˜ï¼Œåˆ†é…é€Ÿåº¦å¿«ã€‚é”€æ¯æ—¶åªéœ€è¦ç§»åŠ¨æ ˆæŒ‡é’ˆå³å¯ï¼Œé€Ÿåº¦å¿«ã€‚
</code></pre>
<h3 id="äºŒ-jvmä¸­çš„å †å’Œæ ˆ">äºŒã€JVMä¸­çš„å †å’Œæ ˆ</h3>
<pre><code>    JVMæ˜¯åŸºäºå †æ ˆçš„è™šæ‹Ÿæœº.JVMä¸ºæ¯ä¸ªæ–°åˆ›å»ºçš„çº¿ç¨‹éƒ½åˆ†é…ä¸€ä¸ªå †æ ˆ;
 å¯¹äºä¸€ä¸ªJavaç¨‹åºæ¥è¯´ï¼Œå®ƒçš„è¿è¡Œå°±æ˜¯é€šè¿‡å¯¹å †æ ˆçš„æ“ä½œæ¥å®Œæˆçš„ã€‚å †æ ˆ ä»¥å¸§ä¸ºå•ä½ä¿å­˜çº¿ç¨‹çš„çŠ¶æ€;
    JVMå¯¹å †æ ˆåªè¿›è¡Œä¸¤ç§æ“ä½œ:ä»¥å¸§ä¸ºå•ä½çš„å‹æ ˆå’Œå‡ºæ ˆæ“ä½œï¼›
 ä»Javaçš„è¿™ç§åˆ†é…æœºåˆ¶æ¥çœ‹:å †æ ˆ(Stack)æ˜¯æ“ä½œç³»ç»Ÿåœ¨å»ºç«‹æŸä¸ªè¿›ç¨‹æ—¶æˆ–è€…çº¿ç¨‹(åœ¨æ”¯æŒå¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­æ˜¯çº¿ç¨‹)ä¸ºè¿™ä¸ªçº¿ç¨‹å»ºç«‹çš„å­˜å‚¨åŒºåŸŸï¼Œè¯¥åŒºåŸŸå…·æœ‰å…ˆè¿›åå‡ºçš„ç‰¹æ€§ï¼›
 æ¯ä¸€ä¸ªJavaåº”ç”¨éƒ½å”¯ä¸€å¯¹åº”ä¸€ä¸ªJVMå®ä¾‹ï¼Œæ¯ä¸€ä¸ªå®ä¾‹å”¯ä¸€å¯¹åº”ä¸€ä¸ªå †ã€‚åº”ç”¨ç¨‹åºåœ¨è¿è¡Œä¸­æ‰€åˆ›å»ºçš„æ‰€æœ‰ç±»å®ä¾‹æˆ–æ•°ç»„éƒ½æ”¾åœ¨è¿™ä¸ªå †ä¸­,å¹¶ç”±åº”ç”¨æ‰€æœ‰çš„çº¿ç¨‹å…±äº«ï¼›
    Javaä¸­åˆ†é…å †å†…å­˜æ˜¯è‡ªåŠ¨åˆå§‹åŒ–çš„ã€‚Javaä¸­æ‰€æœ‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´éƒ½æ˜¯åœ¨å †ä¸­åˆ†é…çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å´æ˜¯åœ¨å †æ ˆä¸­åˆ†é…,ä¹Ÿå°±æ˜¯è¯´åœ¨å»ºç«‹ä¸€ä¸ªå¯¹è±¡æ—¶ä»ä¸¤ä¸ªåœ°æ–¹éƒ½åˆ†é…å†…å­˜ï¼Œåœ¨å †ä¸­åˆ†é…çš„å†…å­˜å®é™…å»ºç«‹è¿™ä¸ªå¯¹è±¡ï¼Œè€Œåœ¨å †æ ˆä¸­åˆ†é…çš„å†…å­˜åªæ˜¯ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªå †å¯¹è±¡çš„æŒ‡é’ˆ(å¼•ç”¨)è€Œå·²ï¼›
 Javaä¸­æ‰€æœ‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´éƒ½æ˜¯åœ¨å †ä¸­åˆ†é…çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å´æ˜¯åœ¨å †æ ˆä¸­åˆ†é…,ä¹Ÿå°±æ˜¯è¯´åœ¨å»ºç«‹ä¸€ä¸ªå¯¹è±¡æ—¶ä»ä¸¤ä¸ªåœ°æ–¹éƒ½åˆ†é…å†…å­˜ï¼Œåœ¨å †ä¸­åˆ†é…çš„å†…å­˜å®é™…å»ºç«‹è¿™ä¸ªå¯¹è±¡ï¼Œè€Œåœ¨å †æ ˆä¸­åˆ†é…çš„å†…å­˜åªæ˜¯ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªå †å¯¹è±¡çš„æŒ‡é’ˆ(å¼•ç”¨)è€Œå·²ã€‚
 åŸºç¡€æ•°æ®ç±»å‹ç›´æ¥åœ¨æ ˆç©ºé—´åˆ†é…ï¼Œæ–¹æ³•çš„å½¢å¼å‚æ•°ï¼Œç›´æ¥åœ¨æ ˆç©ºé—´åˆ†é…ï¼Œå½“æ–¹æ³•è°ƒç”¨å®Œæˆåä»æ ˆç©ºé—´å›æ”¶ã€‚å¼•ç”¨æ•°æ®ç±»å‹ï¼Œéœ€è¦ç”¨newæ¥åˆ›å»ºï¼Œæ—¢åœ¨æ ˆç©ºé—´ åˆ†é…ä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œåˆåœ¨å †ç©ºé—´åˆ†é…å¯¹è±¡çš„ç±»å˜é‡ ã€‚æ–¹æ³•çš„å¼•ç”¨å‚æ•°ï¼Œåœ¨æ ˆç©ºé—´åˆ†é…ä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œå¹¶æŒ‡å‘å †ç©ºé—´çš„å¯¹è±¡åŒºï¼Œå½“æ–¹æ³•è°ƒç”¨å®Œæˆåä»æ ˆç©ºé—´å›æ”¶ã€‚å±€éƒ¨å˜é‡newå‡ºæ¥æ—¶ï¼Œåœ¨æ ˆç©ºé—´å’Œå †ç©ºé—´ä¸­åˆ†é…ç©º é—´ï¼Œå½“å±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸç»“æŸåï¼Œæ ˆç©ºé—´ç«‹åˆ»è¢«å›æ”¶ï¼Œå †ç©ºé—´åŒºåŸŸç­‰å¾…GCå›æ”¶ã€‚æ–¹æ³•è°ƒç”¨æ—¶ä¼ å…¥çš„literalå‚æ•°ï¼Œå…ˆåœ¨æ ˆç©ºé—´åˆ†é…ï¼Œåœ¨æ–¹æ³•è°ƒç”¨å®Œæˆåä»æ ˆ ç©ºé—´åˆ†é…ã€‚å­—ç¬¦ä¸²å¸¸é‡åœ¨DATAåŒºåŸŸåˆ†é…ï¼Œthisåœ¨å †ç©ºé—´åˆ†é…ã€‚æ•°ç»„æ—¢åœ¨æ ˆç©ºé—´åˆ†é…æ•°ç»„åç§°ï¼Œåˆåœ¨å †ç©ºé—´åˆ†é…æ•°ç»„å®é™…çš„å¤§å°ï¼</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring bootå…¥é—¨ã€äºŒã€‘]]></title>
        <id>https://flakkaqi.github.io/post/spring-boot-ru-men-er/</id>
        <link href="https://flakkaqi.github.io/post/spring-boot-ru-men-er/">
        </link>
        <updated>2020-06-22T05:50:17.000Z</updated>
        <summary type="html"><![CDATA[<p>åˆ©ç”¨Springbootæ„å»ºåº”ç”¨ç¨‹åº</p>
]]></summary>
        <content type="html"><![CDATA[<p>åˆ©ç”¨Springbootæ„å»ºåº”ç”¨ç¨‹åº</p>
<!-- more -->
<h3 id="ä¸€-é¦–å…ˆåœ¨httpsstartspringio-ç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„springbooté¡¹ç›®">ä¸€ã€é¦–å…ˆåœ¨https://start.spring.io/ ç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„springbooté¡¹ç›®</h3>
<h3 id="äºŒ-ç¼–å†™spring-bootå¯åŠ¨ç±»">äºŒã€ç¼–å†™Spring bootå¯åŠ¨ç±»</h3>
<p>step1ï¼šåœ¨com.example.springbootåŒ…ä¸‹åˆ›å»ºApplication.java</p>
<pre><code>package com.example.sprinboot;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import java.util.Arrays;

/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 14:31
 * @Description: springbootçš„å¯åŠ¨ç±»
 */
//@SpringBootApplication ä»¥ä¸‹å‡ ä¸ªæ³¨è§£çš„ç®€å•å†™æ³•
@Configuration //æ ‡è®°è¿™ä¸ªç±»ä½œä¸ºåº”ç”¨ä¸Šä¸‹æ–‡beanå®šä¹‰çš„æº
@EnableAutoConfiguration //å‘Šè¯‰springbootæ ¹æ®ç±»è·¯å¾„è®¾ç½®ã€å…¶ä»–beanå’Œå„ç§å±æ€§è®¾ç½®å¼€å§‹æ·»åŠ bean
@ComponentScan  //å‘Šè¯‰springåœ¨æŒ‡å®šåŒ…ä¸­å¯»æ‰¾å…¶ä»–ç»„ä»¶ï¼Œé…ç½®å’ŒæœåŠ¡ï¼Œè®©ä»–æ‰¾åˆ°æ§åˆ¶å™¨controller
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args); //springbootå¯åŠ¨åº”ç”¨ç¨‹åºçš„æ–¹æ³•
    }

    //æ’åºå¹¶æ‰“å°æ‰€æœ‰ç”±æ‚¨çš„åº”ç”¨ç¨‹åºåˆ›å»ºæˆ–è€…ç”±springbootè‡ªåŠ¨æ·»åŠ çš„æ‰€æœ‰beanã€‚
    @Bean
    public CommandLineRunner commandLineRunner(ApplicationContext ctx) {
        return args -&gt; {
            System.out.println(&quot;Let's inspect the beans provided by Spring Boot:&quot;);
            String[] beanNames = ctx.getBeanDefinitionNames();
            Arrays.sort(beanNames);
            for (String beanName : beanNames) {
                System.out.println(beanName);
            }
        };
    }
}
</code></pre>
<p>step2ï¼šåœ¨com.example.springbootåˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨HelloController.java</p>
<pre><code>package com.example.sprinboot;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 14:22
 * @Description:
 */
//è¯¥æ³¨è§£æ„å‘³ç€è¯¥ç±»å¯ä»¥ç”±Spring MVCä½¿ç”¨æ¥å¤„ç†Webè¯·æ±‚ï¼Œ@Controller+@ResponseBodyè¿”å›æ•°æ®è€Œä¸æ˜¯è§†å›¾
@RestController
public class HelloController {

    //è¯¥æ³¨è§£æ˜ å°„è·¯å¾„&quot;/&quot;index()æ–¹æ³•ä¸Šï¼Œä»æµè§ˆå™¨è°ƒç”¨æˆ–è€…åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨curlæ—¶ï¼Œè¯¥æ–¹æ³•è¿”å›çº¯æ–‡æœ¬
    @RequestMapping(&quot;/&quot;)
    public String index() {
        return &quot;Greetings from Spring Boot!&quot;;
    }
}
</code></pre>
<p>step3ï¼šè¿è¡Œspringbootå¯åŠ¨ç±»</p>
<pre><code>mvnw springt-boot:run
æ‰“å°å‡ºæ‰€æœ‰çš„bean
</code></pre>
<p>step4ï¼šæ‰“å¼€æ§åˆ¶å°ä½¿ç”¨curlè°ƒç”¨è¯¥æ¥å£</p>
<pre><code>curl localhost:8080
Greetings from Spring Boot!
</code></pre>
<h3 id="ä¸‰-æ·»åŠ å•å…ƒæµ‹è¯•">ä¸‰ã€æ·»åŠ å•å…ƒæµ‹è¯•</h3>
<p>step1ï¼šæ·»åŠ sprinboot-testä¾èµ–</p>
<pre><code>&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
	&lt;scope&gt;test&lt;/scope&gt;
	&lt;exclusions&gt;
		&lt;exclusion&gt;
			&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
			&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;
		&lt;/exclusion&gt;
	&lt;/exclusions&gt;
&lt;/dependency&gt;
</code></pre>
<p>step2ï¼šæ­¤å¤„ä»‹ç»ä¸¤ç§å•å…ƒæµ‹è¯•æ–¹å¼ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œæµ‹è¯•åŒ…è·¯å¾„ä¸€å®šè¦å’Œè¢«æµ‹è¯•çš„åŒ…è·¯å¾„ä¿æŒä¸€è‡´ã€‚<br>
step2-1ï¼šæ¨¡æ‹ŸHttpè¯·æ±‚å‘¨æœŸï¼Œç¼–å†™ç®€å•çš„å…¨æ ˆæµ‹è¯•</p>
<pre><code>package com.example.springboot;

import static org.assertj.core.api.Assertions.*;

import java.net.URL;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.server.LocalServerPort;
import org.springframework.http.ResponseEntity;

/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 15:50
 * @Description: æ¨¡æ‹ŸHttpè¯·æ±‚å‘¨æœŸï¼Œç¼–å†™ç®€å•çš„å…¨æ ˆæµ‹è¯•
 */
//åµŒå…¥å¼æœåŠ¡å™¨ä»ä¸€ä¸ªéšæœºç«¯å£å¯åŠ¨ï¼Œå¹¶åœ¨è¿è¡Œæ—¶ä½¿ç”¨ @LocalServerPortå‘ç°çš„çœŸå®ç«¯å£
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,classes = Application.class)
public class HelloControllerT {
    @LocalServerPort
    private int port;

    private URL base;

    @Autowired
    private TestRestTemplate template;

    @BeforeEach
    public void setUp() throws Exception {
        this.base = new URL(&quot;http://localhost:&quot; + port + &quot;/&quot;);
    }

    @Test
    public void getHello() throws Exception {
        ResponseEntity&lt;String&gt; response = template.getForEntity(base.toString(),
                String.class);
        assertThat(response.getBody()).isEqualTo(&quot;Greetings from Spring Boot!&quot;);
    }
}
</code></pre>
<p>step2-2ï¼šæ¨¡æ‹Ÿé€šè¿‡æ–­ç‚¹çš„servletè¯·æ±‚å’Œå“åº”</p>
<pre><code>package com.example.springboot;

import static org.hamcrest.Matchers.equalTo;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
/**
 * @Auther: QiShuai
 * @Date: 2020/6/22 15:20
 * @Description: æ¨¡æ‹Ÿé€šè¿‡æ–­ç‚¹çš„servletè¯·æ±‚å’Œå“åº”
 */
//ä»¥ä¸‹ä¸¤ä¸ªæ³¨è§£ä½œç”¨æ˜¯æ³¨å…¥MockMvcå®ä¾‹
@SpringBootTest(classes = Application.class)  //ä½¿ç”¨è¯¥æ³¨è§£çš„è¯è¦æ±‚åˆ›å»ºæ•´ä¸ªåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡
@AutoConfigureMockMvc
public class HelloControllerTest {

    @Autowired
    private MockMvc mvc;  //é€šè¿‡ä¸€ç»„ä¾¿æ·çš„æ„å»ºå™¨ç±»å°†httpè¯·æ±‚å‘é€åˆ°DispatcherServletå¹¶å¯¹ç»“æœæ–­è¨€

    @Test
    public void getHello() throws Exception {
        mvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;)
                .accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk())
                .andExpect(content().string(equalTo(&quot;Greetings from Spring Boot!&quot;)));
    }
}
</code></pre>
<h3 id="å››-æ·»åŠ ç”Ÿäº§çº§æœåŠ¡">å››ã€æ·»åŠ ç”Ÿäº§çº§æœåŠ¡</h3>
<p>springbootçš„æ‰§è¡Œå™¨æ¨¡å—æä¾›å¤šç§ç®¡ç†æœåŠ¡ï¼ˆæ¯”å¦‚è¿è¡ŒçŠ¶æ€ã€å®¡è®¡ã€Beanç­‰ï¼‰<br>
step1ï¼šæ·»åŠ ä¾èµ–</p>
<pre><code>&lt;!--springbootçš„æ‰§è¡Œå™¨æ¨¡å—æä¾›å¤šç§ç®¡ç†æœåŠ¡ï¼ˆæ¯”å¦‚è¿è¡ŒçŠ¶æ€ã€å®¡è®¡ã€Beanç­‰ï¼‰--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
<p>step2ï¼š æ£€æŸ¥åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶æ€</p>
<pre><code>$ curl localhost:8080/actuator/health
{&quot;status&quot;:&quot;UP&quot;}
</code></pre>
<p>step3ï¼šå…¶ä»–çš„å‚é˜…<a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/reference/htmlsingle/#production-ready-endpoints">ç«¯ç‚¹</a></p>
<h3 id="äº”-springboot-æºä»£ç ">äº”ã€Springboot æºä»£ç </h3>
<p><a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-starters">Spring bootæºä»£ç </a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring boot å…¥é—¨ã€ä¸€ã€‘]]></title>
        <id>https://flakkaqi.github.io/post/spring-boot/</id>
        <link href="https://flakkaqi.github.io/post/spring-boot/">
        </link>
        <updated>2020-06-22T01:44:36.000Z</updated>
        <summary type="html"><![CDATA[<p>springbootå¼€å§‹ç¬¬ä¸€å¤©ğŸ‘¶</p>
]]></summary>
        <content type="html"><![CDATA[<p>springbootå¼€å§‹ç¬¬ä¸€å¤©ğŸ‘¶</p>
<!-- more -->
<h2 id="ä¸€-æ¦‚è¿°">ä¸€ã€ æ¦‚è¿°</h2>
<p>springboot ä¼šè®©ä½ éå¸¸å®¹æ˜“çš„åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ç”Ÿäº§çº§springåŸºç¡€åº”ç”¨ï¼Œè€Œä¸”å¯¹äºå®ƒä½ èƒ½åšçš„å°±æ˜¯â€œå¼€å§‹è¿è¡Œâ€,æˆ‘ä»¬é‡‡ç”¨äº†springå¹³å°è‡ªä¸»çš„è§†å›¾å’Œç¬¬ä¸‰æ–¹æ–‡åº“ï¼Œè¿™æ ·ä½ ä¼šåšæœ€å°‘çš„æ— ç”¨åŠŸã€‚spring bootåº”ç”¨åªéœ€è¦éå¸¸å°‘çš„é…ç½®ã€‚</p>
<h3 id="1-ç‰¹ç‚¹">1ã€ç‰¹ç‚¹</h3>
<pre><code>1.åˆ›å»ºç‹¬ç«‹çš„Springåº”ç”¨ç¨‹åº
2.ç›´æ¥åµŒå…¥Tomcatï¼ŒJettyæˆ–Undertowï¼ˆæ— éœ€éƒ¨ç½²WARæ–‡ä»¶ï¼‰
3.æä¾›å…¥é—¨çº§çš„ä¾èµ–æ–‡ä»¶æ¥ç®€åŒ–æ‚¨çš„æ„å»ºé…ç½®
4.å°½å¯èƒ½çš„è‡ªåŠ¨é…ç½®Springå’Œç¬¬ä¸‰æ–¹åº“
5.æä¾›å¯ç”¨äºç”Ÿäº§çš„åŠŸèƒ½ï¼Œå¦‚æŒ‡æ ‡ï¼Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥å’Œå¤–éƒ¨é…ç½®
6.å®Œå…¨ä¸ä¼šç”Ÿæˆä»£ç ï¼Œä¹Ÿä¸éœ€è¦XMLé…ç½®
</code></pre>
<h3 id="2å¿«é€Ÿå…¥é—¨">2.å¿«é€Ÿå…¥é—¨</h3>
<p>step1ï¼šå¼€å§‹ä¸€ä¸ªæ–°çš„spring booté¡¹ç›®</p>
<pre><code>ä½¿ç”¨https://start.spring.io/ åˆ›å»ºä¸€ä¸ªæ–°çš„WEBé¡¹ç›®ï¼Œå¹¶æ·»åŠ webä¾èµ–ã€‚ä¸‹è½½å‹ç¼©åŒ…åˆ°æœ¬åœ°ã€‚
å‹¾é€‰ç¤ºä¾‹ï¼šmaven projectã€2.3.1ã€jarã€8ã€Spring Web
</code></pre>
<p>step2ï¼šæ·»åŠ ä½ çš„ä»£ç </p>
<pre><code>
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@SpringBootApplication
//The @RestController annotation tells Spring that this code describes an endpoint that should be made available over the web.
@RestController
public class DemoApplication {

    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }

    //The @GetMapping(â€œ/helloâ€) tells Spring to use our hello() method to answer requests that get sent to the http://localhost:8080/hello address.
    @GetMapping(&quot;/hello&quot;)
    //the @RequestParam is telling Spring to expect a name value in the request, but if itâ€™s not there, it will use the word â€œWorldâ€ by default.
    public String hello(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;) String name) {
        return String.format(&quot;Hello %s!&quot;, name);
    }
}
  
</code></pre>
<p>The @RestController annotation tells Spring that this code describes an endpoint that should be made available over the web. The @GetMapping(â€œ/helloâ€) tells Spring to use our hello() method to answer requests that get sent to the http://localhost:8080/hello address. Finally, the @RequestParam is telling Spring to expect a name value in the request, but if itâ€™s not there, it will use the word â€œWorldâ€ by default.</p>
<p>step3ï¼šå¯åŠ¨é¡¹ç›®<br>
æ‰“å¼€æ§åˆ¶å°æ‰§è¡Œå¯åŠ¨å‘½ä»¤</p>
<pre><code>mvnw spring-boot:run
</code></pre>
<p>step4ï¼šåœ¨æµè§ˆå™¨è°ƒç”¨æ¥å£<br>
é¡¹ç›®å¯åŠ¨åæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯</p>
<p><img src="https://flakkaqi.github.io/post-images/1592797368807.png" alt="" loading="lazy"><br>
ç«¯å£ä¸º 8080<br>
å¯ä»¥åœ¨æµè§ˆå™¨ç«¯è¾“å…¥åœ°å€ï¼šhttp://localhost:8080/hello?name=amyè¿›è¡Œæ¥å£è°ƒç”¨</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[èº«ä»½è¯æ ¡éªŒè§„åˆ™]]></title>
        <id>https://flakkaqi.github.io/post/shen-fen-zheng-xiao-yan-gui-ze/</id>
        <link href="https://flakkaqi.github.io/post/shen-fen-zheng-xiao-yan-gui-ze/">
        </link>
        <updated>2020-06-20T07:51:20.000Z</updated>
        <content type="html"><![CDATA[<pre><code>     * èº«ä»½è¯15ä½ç¼–ç è§„åˆ™ï¼šdddddd yymmdd xx p
     * ddddddï¼š6ä½åœ°åŒºç¼–ç 
     * yymmdd: å‡ºç”Ÿå¹´(ä¸¤ä½å¹´)æœˆæ—¥ï¼Œå¦‚ï¼š910215
     * xx: é¡ºåºç¼–ç ï¼Œç³»ç»Ÿäº§ç”Ÿï¼Œæ— æ³•ç¡®å®š
     * p: æ€§åˆ«ï¼Œå¥‡æ•°ä¸ºç”·ï¼Œå¶æ•°ä¸ºå¥³
     * èº«ä»½è¯18ä½ç¼–ç è§„åˆ™ï¼šdddddd yyyymmdd xxx y
     * ddddddï¼š6ä½åœ°åŒºç¼–ç 
     * yyyymmdd: å‡ºç”Ÿå¹´(å››ä½å¹´)æœˆæ—¥ï¼Œå¦‚ï¼š19910215
     * xxxï¼šé¡ºåºç¼–ç ï¼Œç³»ç»Ÿäº§ç”Ÿï¼Œæ— æ³•ç¡®å®šï¼Œå¥‡æ•°ä¸ºç”·ï¼Œå¶æ•°ä¸ºå¥³
     * y: æ ¡éªŒç ï¼Œè¯¥ä½æ•°å€¼å¯é€šè¿‡å‰17ä½è®¡ç®—è·å¾—
     * å‰17ä½å·ç åŠ æƒå› å­ä¸º Wi = [ 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ]
     * éªŒè¯ä½ Y = [ 1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2 ]
     * å¦‚æœéªŒè¯ç æ°å¥½æ˜¯10ï¼Œä¸ºäº†ä¿è¯èº«ä»½è¯æ˜¯åå…«ä½ï¼Œé‚£ä¹ˆç¬¬åå…«ä½å°†ç”¨Xæ¥ä»£æ›¿
     * æ ¡éªŒä½è®¡ç®—å…¬å¼ï¼šY_P = mod( âˆ‘(AiÃ—Wi),11 )
     * iä¸ºèº«ä»½è¯å·ç 1...17 ä½; Y_Pä¸ºæ ¡éªŒç Yæ‰€åœ¨æ ¡éªŒç æ•°ç»„ä½ç½®
</code></pre>
<pre><code class="language-js">         function validateIdCard(idCard){
            //15ä½å’Œ18ä½èº«ä»½è¯å·ç çš„æ­£åˆ™è¡¨è¾¾å¼
            var regIdCard=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;
            //å¦‚æœé€šè¿‡è¯¥éªŒè¯ï¼Œè¯´æ˜èº«ä»½è¯æ ¼å¼æ­£ç¡®ï¼Œä½†å‡†ç¡®æ€§è¿˜éœ€è®¡ç®—
            if(regIdCard.test(idCard)){
                if(idCard.length==18){
                    var idCardWi=new Array( 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ); //å°†å‰17ä½åŠ æƒå› å­ä¿å­˜åœ¨æ•°ç»„é‡Œ
                    var idCardY=new Array( 1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2 ); //è¿™æ˜¯é™¤ä»¥11åï¼Œå¯èƒ½äº§ç”Ÿçš„11ä½ä½™æ•°ã€éªŒè¯ç ï¼Œä¹Ÿä¿å­˜æˆæ•°ç»„
                    var idCardWiSum=0; //ç”¨æ¥ä¿å­˜å‰17ä½å„è‡ªä¹–ä»¥åŠ æƒå› å­åçš„æ€»å’Œ
                    for(var i=0;i&lt;17;i++){
                        idCardWiSum+=idCard.substring(i,i+1)*idCardWi[i];
                    }
                    var idCardMod=idCardWiSum%11;//è®¡ç®—å‡ºæ ¡éªŒç æ‰€åœ¨æ•°ç»„çš„ä½ç½®
                    var idCardLast=idCard.substring(17);//å¾—åˆ°æœ€åä¸€ä½èº«ä»½è¯å·ç 
                    //å¦‚æœç­‰äº2ï¼Œåˆ™è¯´æ˜æ ¡éªŒç æ˜¯10ï¼Œèº«ä»½è¯å·ç æœ€åä¸€ä½åº”è¯¥æ˜¯X
                    if(idCardMod==2){
                        if(idCardLast==&quot;X&quot;||idCardLast==&quot;x&quot;){
                            alert(&quot;æ­å–œé€šè¿‡éªŒè¯å•¦ï¼&quot;);
                        }else{
                            alert(&quot;èº«ä»½è¯å·ç é”™è¯¯ï¼&quot;);
                        }
                    }else{
                        //ç”¨è®¡ç®—å‡ºçš„éªŒè¯ç ä¸æœ€åä¸€ä½èº«ä»½è¯å·ç åŒ¹é…ï¼Œå¦‚æœä¸€è‡´ï¼Œè¯´æ˜é€šè¿‡ï¼Œå¦åˆ™æ˜¯æ— æ•ˆçš„èº«ä»½è¯å·ç 
                        if(idCardLast==idCardY[idCardMod]){
                            alert(&quot;æ­å–œé€šè¿‡éªŒè¯å•¦ï¼&quot;);
                        }else{
                            alert(&quot;èº«ä»½è¯å·ç é”™è¯¯ï¼&quot;);
                        }
                    }
                }
            }else{
                alert(&quot;èº«ä»½è¯æ ¼å¼ä¸æ­£ç¡®!&quot;);
            }
        }
    ``` 
![](https://flakkaqi.github.io/post-images/1592639889017.png)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[springboot+mybatis+swaager]]></title>
        <id>https://flakkaqi.github.io/post/springbootmybatisswaager/</id>
        <link href="https://flakkaqi.github.io/post/springbootmybatisswaager/">
        </link>
        <updated>2020-06-09T06:25:40.000Z</updated>
        <summary type="html"><![CDATA[<p>Spring Bootä½¿ç”¨MyBatis Generatorã€Swaggerã€MyBatisæ˜¯Javaç›®å‰ä¸»æµçš„ORMæ¡†æ¶ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="http://www.ityouknow.com/springboot/2016/11/06/spring-boot-mybatis.html">åœ¨Spring Bootä¸­ä½¿ç”¨MyBatis</a><br>
è¿™ç¯‡æ–‡ç« æ¥å°†ä»‹ç»MyBatis Generatorï¼Œï¼ˆç®€ç§°MBGï¼Œä¸‹æ–‡ä½¿ç”¨è¿™ä¸ªç®€ç§°ï¼‰ï¼Œè¯¥æ’ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”Ÿæˆå®ä½“ç±»ã€Mapperæ¥å£ä»£ç ç­‰ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå®ƒæœ‰ç‚¹åƒ.NETçš„EFæ¡†æ¶ä¸­çš„DB Firstã€‚å¦å¤–ï¼Œé¡ºä¾¿ä»‹ç»Spring Bootå¦‚ä½•é›†æˆSwaggerã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Spring Bootä½¿ç”¨MyBatis Generatorã€Swaggerã€MyBatisæ˜¯Javaç›®å‰ä¸»æµçš„ORMæ¡†æ¶ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="http://www.ityouknow.com/springboot/2016/11/06/spring-boot-mybatis.html">åœ¨Spring Bootä¸­ä½¿ç”¨MyBatis</a><br>
è¿™ç¯‡æ–‡ç« æ¥å°†ä»‹ç»MyBatis Generatorï¼Œï¼ˆç®€ç§°MBGï¼Œä¸‹æ–‡ä½¿ç”¨è¿™ä¸ªç®€ç§°ï¼‰ï¼Œè¯¥æ’ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”Ÿæˆå®ä½“ç±»ã€Mapperæ¥å£ä»£ç ç­‰ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå®ƒæœ‰ç‚¹åƒ.NETçš„EFæ¡†æ¶ä¸­çš„DB Firstã€‚å¦å¤–ï¼Œé¡ºä¾¿ä»‹ç»Spring Bootå¦‚ä½•é›†æˆSwaggerã€‚</p>
<!-- more -->
<p><a href="https://www.cnblogs.com/FireworksEasyCool/p/11133827.html">ç‚¹å‡»è·³è½¬å‚è€ƒæ–‡ç« </a></p>
<h2 id="ä¸€-åˆ›å»ºmysqlæ•°æ®åº“">ä¸€ã€åˆ›å»ºMySQLæ•°æ®åº“</h2>
<pre><code class="language-sql">create database generatortest default character set utf8mb4 collate utf8mb4_unicode_ci;
use generatortest;
create user 'generatortest'@'localhost' identified by 'generatortest123';
grant all privileges on generatortest.* to 'generatortest'@'localhost';
flush privileges;

CREATE TABLE `user`
(
  id INT NOT NULL AUTO_INCREMENT COMMENT 'ç”¨æˆ·ID',
  user_name VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·å',
  `password` VARCHAR(50) NOT NULL COMMENT 'å¯†ç ',
  email VARCHAR(50) COMMENT 'é‚®ç®±',
  avatar VARCHAR(255) COMMENT 'å¤´åƒ',
  create_time DATETIME NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
    update_time DATETIME NOT NULL COMMENT 'æ›´æ–°æ—¶é—´',
    deleted TINYINT(1) default 0 COMMENT 'é€»è¾‘åˆ é™¤',
  PRIMARY KEY (id)
);
ALTER TABLE `user` COMMENT 'ç”¨æˆ·è¡¨';

CREATE TABLE role
(
  id INT NOT NULL AUTO_INCREMENT COMMENT 'è§’è‰²ID',
  role_name VARCHAR(50) NOT NULL COMMENT 'è§’è‰²å',
  enabled TINYINT(1) default 1 NOT NULL COMMENT 'æœ‰æ•ˆæ ‡å¿—',
  create_time DATETIME NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
    update_time DATETIME NOT NULL COMMENT 'æ›´æ–°æ—¶é—´',
    deleted TINYINT(1) default 0 NOT NULL COMMENT 'é€»è¾‘åˆ é™¤',
  PRIMARY KEY (id)
);
ALTER TABLE role COMMENT 'è§’è‰²è¡¨';

CREATE TABLE permission
(
  id INT NOT NULL AUTO_INCREMENT COMMENT 'æƒé™ID',
  permission_name VARCHAR(50) NOT NULL COMMENT 'æƒé™åç§°',
  permission_value VARCHAR(200) NOT NULL COMMENT 'æƒé™å€¼',
  PRIMARY KEY (id)
);
ALTER TABLE permission COMMENT 'æƒé™è¡¨';

CREATE TABLE user_role
(
  user_id INT NOT NULL COMMENT 'ç”¨æˆ·ID',
  role_id INT NOT NULL COMMENT 'è§’è‰²ID'
);
ALTER TABLE user_role COMMENT 'ç”¨æˆ·è§’è‰²å…³è”è¡¨';

CREATE TABLE role_permission
(
  role_id INT NOT NULL COMMENT 'è§’è‰²ID',
  permission_id INT NOT NULL COMMENT 'æƒé™ID'
);
ALTER TABLE role_permission COMMENT 'è§’è‰²æƒé™å…³è”è¡¨';
</code></pre>
<h2 id="äºŒ-åˆ›å»ºmavené¡¹ç›®">äºŒã€åˆ›å»ºmavené¡¹ç›®</h2>
<h3 id="1-åˆ›å»ºmavenå·¥ç¨‹">1ã€åˆ›å»ºmavenå·¥ç¨‹</h3>
<p>å¯ä»¥å‚è€ƒ<a href="https://www.cnblogs.com/qinxu/p/9648429.html">ideaåˆ›å»ºmavené¡¹ç›®</a></p>
<h3 id="2-pomxml">2ã€pom.xml</h3>
<pre><code class="language-xml">&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.0.8&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.5.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;
            &lt;version&gt;1.3.7&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    ```
### 3ã€

![](https://flakkaqi.github.io/post-images/1592639968494.webp)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[springbootåˆ›å»ºå®šæ—¶ä»»åŠ¡]]></title>
        <id>https://flakkaqi.github.io/post/springboot-chuang-jian-ding-shi-ren-wu/</id>
        <link href="https://flakkaqi.github.io/post/springboot-chuang-jian-ding-shi-ren-wu/">
        </link>
        <updated>2020-06-09T03:43:42.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ˜•æœ€ç®€å•çš„å®šæ—¶ä»»åŠ¡ã€‚å®šæ—¶æ—¶é—´æœ€å¥½æ”¾åœ¨é…ç½®æ–‡ä»¶é‡Œã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ˜•æœ€ç®€å•çš„å®šæ—¶ä»»åŠ¡ã€‚å®šæ—¶æ—¶é—´æœ€å¥½æ”¾åœ¨é…ç½®æ–‡ä»¶é‡Œã€‚</p>
<!-- more -->
<h3 id="å®šæ—¶ä»»åŠ¡">å®šæ—¶ä»»åŠ¡</h3>
<pre><code class="language-java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import org.springframework.scheduling.annotation.EnableScheduling;
import org.springframework.scheduling.annotation.Scheduled;

@Configuration      //1.ä¸»è¦ç”¨äºæ ‡è®°é…ç½®ç±»ï¼Œå…¼å¤‡Componentçš„æ•ˆæœã€‚
@EnableScheduling   // 2.å¼€å¯å®šæ—¶ä»»åŠ¡
public class QuestionnaireTimingJob {

    private static final Logger logger = LoggerFactory.getLogger(QuestionnaireTimingJob.class);

    @Value(&quot;${task.questionnaireJob.baseRestUrl}&quot;)
    private String baseUrl;

    @Scheduled(cron = &quot;${task.questionnaireJob.corn}&quot;)
    public void process() {
        logger.info(&quot;æ‰§è¡Œé™æ€å®šæ—¶ä»»åŠ¡:xxxxxxx&quot;+ LocalDateTime.now());
    }
}
</code></pre>
<h3 id="é…ç½®æ–‡ä»¶application-jobyml">é…ç½®æ–‡ä»¶ï¼šapplication-job.yml</h3>
<pre><code class="language-yml">task:
  questionnaireJob:
    corn: 0 0 23 * * ?
    baseRestUrlï¼šhttp://xxxx.xxx.cclssksls.cclslls/skss/
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://flakkaqi.github.io/post-images/1591674724449.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
</feed>